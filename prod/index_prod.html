<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,maximum-scale=1,user-scalable=no"><title>LOST</title><style type="text/css">body{background:#111;margin:0}#canvas{display:inline-block;width:110vh;height:auto;background-color:#565656;margin:auto;display:block;z-index:1}#canvas_mobile{display:none;position:fixed;bottom:0;left:0;z-index:2;opacity:.4}#canvas_mobile_gira{display:none;background-color:#000;position:fixed;top:0;left:0;z-index:3;width:100vw;height:100vh}#controles_mobile{display:none;width:100%;height:100px;position:fixed;bottom:0;left:0;z-index:4}#izq_mobile{position:absolute;width:70px;height:80px;display:inline-block;left:10px;top:10px}#der_mobile{position:absolute;width:70px;height:80px;display:inline-block;left:105px;top:10px}#arr_mobile{position:absolute;width:70px;height:80px;display:inline-block;right:115px;top:10px}#accion_mobile{position:absolute;width:70px;height:80px;display:inline-block;right:15px;top:10px}.tecla_mobile{background-color:rgba(255,0,0,.2)}.tecla_mobile.pulsada{background-color:rgba(255,0,0,.4);box-shadow:0 0 2px 6px rgba(255,255,255,.2)}@media (max-width:767px) and (orientation:portrait){#canvas_mobile_gira{display:block!important}}@media (max-width:767px) and (orientation:landscape){#canvas_mobile_gira{display:none!important}}</style></head><body><div id="lost"><canvas id="canvas" width="840" height="600"></canvas><canvas id="canvas_mobile" width="100%" height="200"></canvas><canvas id="canvas_mobile_gira" width="100%" height="100%"></canvas><div id="controles_mobile"><span class="tecla_mobile" id="izq_mobile"></span> <span class="tecla_mobile" id="der_mobile"></span> <span class="tecla_mobile" id="arr_mobile"></span> <span class="tecla_mobile" id="accion_mobile"></span></div></div><script type="text/javascript">var t=function(t,h,s){this.a=[],this.d=25,s&&(this.d=this.d/100);for(var a=0;a<this.d;a++)this.a.push(new i(t,h,s))},i=function(t,i,h){this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.h=3,this.j=15,this.k=2,this.l=15,this.r=this.e(0,155),this.g="0",this.b=this.e(0,55),h&&(this.r=this.e(0,255),this.g="0",this.b="0"),this.x=t,this.y=i,this.xv=this.e(this.h,this.j),this.yv=this.e(this.h/2,this.j/2),this.xv>0?this.max_x=t+100*Math.random():this.max_x=t-100*Math.random(),this.yv>0?this.max_y=i+100*Math.random():this.max_y=i-100*Math.random(),this.opacidad=Math.random(),this.size=this.e(this.k,this.l)},h=function(t,i,h,s,a,e,n){this.x=t,this.y=i+n.m/2;var r=1,o=this.x+n.o+15;a||(r=-1,o=this.x-n.o+15),this.x=o,this.size=1,this.xv=35*r+h,this.yv=7*(Math.random()-.5)+s},s=function(t,i,h,s,a,e){this.x=t-e.o/4;var n=Math.floor(e.m/3);this.y=i+e.m/1.7+a.e(-n,n),this.size=1;this.angulo=90,this.xv=-1*(.5+Math.random())*5+h,this.yv=7*(Math.random()-.5)+s},a=function(i,h,s,a){this.que_pie=0,this.angulo=0,this.size_enemigo_pixel=4,this.x=h,this.y=s,this.m=12*this.size_enemigo_pixel,this.o=6*this.size_enemigo_pixel+5,this.dx=0,this.dy=0,this.friction=7e12,this.accel=500,this.shoot_back=1500,this.q=3e4,this.last_left=!1,this.s=800,this.t=i.u(),this.v=140,this.w=500,this.z=i.A+this.o,this.B=-this.o,this.C=0,this.D=Math.random()>.5,this.F=i.u(),this.muriendo=i.u(),this.G=a,this.H=[],this.I=[],this.H[0]=[[,,,1,1,1],[,,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,,1,1,,,],[1,,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,,,,,,]],this.I[0]=[[,,,1,1,1],[,,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,,1,1,,,],[1,,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[0].length;e++)this.I[0][e].reverse();this.H[1]=[[1,,,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,,,],[,,1,1,,,],[1,,1,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,,]],this.I[1]=[[1,,,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,,,],[,,1,1,,,],[1,,1,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,,]];for(var e=0;e<this.I[1].length;e++)this.I[1][e].reverse();this.H[2]=[[1,,,,1,1],[1,1,,,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,1,1],[1,,1,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,1,,],[,,,,,,]],this.I[2]=[[1,,,,1,1],[1,1,,,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,1,1],[1,,1,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[2].length;e++)this.I[2][e].reverse();this.H[3]=[[1,1,1,,,,],[1,1,1,1,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,,1,1,,],[,1,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.I[3]=[[1,1,1,,,,],[1,1,1,1,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,,1,1,,],[,1,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[3].length;e++)this.I[3][e].reverse();this.H[4]=[[,1,,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,,],[1,1,,1,1,1],[1,,,1,1,1],[,,,1,1,1],[,,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.I[4]=[[,1,,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,,],[1,1,,1,1,1],[1,,,1,1,1],[,,,1,1,1],[,,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[4].length;e++)this.I[4][e].reverse();this.J=this.H[this.G],this.K=this.I[this.G],this.update=function(t){if(!(i.M.L>i.u()||i.N>i.u())){var h=0,s=0;if(h=Math.abs(this.x-i.M.centro_x),s=Math.abs(this.y-i.M.centro_y),!(Math.sqrt(h*h+s*s)>i.O/2)){s<60&&h<i.A/2?(this.rapido=!0,i.M.x<this.x?this.D=!0:this.D=!1):this.rapido=!1,this.centro_x=this.x+this.o/2,this.centro_y=this.y+this.m/2,this.wasleft=this.dx<0,this.wasright=this.dx>0;var a=this.friction*(this.falling?.2:1),e=this.accel;this.ddx=0,this.ddy=this.s;var n=!1;if(this.P()&&!this.muerto&&(n=!0,i.M.Q--,window.golpe_audio.play()),!this.muerto&&!n){var r=Math.random()>.9,o=Math.random()>.9;if(this.R()&&!this.jumping){var l=Math.random(),d=l<.1;l>.8?this.jump=!0:this.S()&&r?this.jump=!0:d?(this.F=i.u()+1e3,this.jump=!1):this.jump=!1}else this.T()&&o?this.jump=!0:this.S()&&r?this.jump=!0:this.jump=!1;this.D&&i.u()>this.F?(this.ddx=this.ddx-e,this.last_left=!0):this.wasleft&&(this.ddx=this.ddx+a),!this.D&&i.u()>this.F?(this.ddx=this.ddx+e,this.last_left=!1):this.wasright&&(this.ddx=this.ddx-a),this.jump&&!this.jumping&&this.t<i.u()&&(this.ddy=this.ddy-this.q,this.jumping=!0,this.falling=!0,this.t=i.u()+1e3),this.accion&&(i.counter,this.C)}this.x=this.x+t*this.dx,this.y=this.y+t*this.dy;var u=this.v;this.ddx;this.rapido||this.jumping||(u=.5*this.v,.5*this.ddx),this.muerto||n?(this.dx=0,this.dy=i.U(this.dy+t*this.ddy,-this.w,this.w)):(this.dx=i.U(this.dx+t*this.ddx,-u,u),this.dy=i.U(this.dy+t*this.ddy,-this.w,this.w)),(this.wasleft&&this.dx>0||this.wasright&&this.dx<0)&&(this.dx=0);for(var c=(this.y+this.m)%i.W.V,f=this.y%i.W.V,m=!1,y=this.x+5;y<=this.x+this.o-5;y++)i.X(y,this.y-2)&&(m=!0);for(var x=!1,b=this.x+5;b<=this.x+this.o-5;b++)i.X(b,this.y+this.m)&&(x=!0);for(var M=!1,v=this.y+5;v<=this.y+this.m-5;v++)i.X(this.x-6,v)&&(M=!0);for(var g=!1,_=this.y+5;_<=this.y+this.m-5;_++)i.X(this.x+this.o+2,_)&&(g=!0);this.dy>=0?(this.y+this.m>i.O&&(this.y=i.O-this.m,this.dy=0,this.jumping=!1,this.falling=!1),x&&(this.dy=0,this.jumping=!1,this.falling=!1,c&&(this.y=20*Math.floor((this.y+this.m)/20)-this.m))):this.dy<0&&m&&f&&(this.dy=0),this.dx>0?this.x+this.o>=this.z?(this.x=10,this.dx=-this.dx):g&&(this.dx=0,this.D=!this.D):this.dx<0&&(this.x<=this.B?(this.x=i.A-this.o,this.dx=-this.dx):M&&(this.dx=0,this.D=!this.D))}}},this.Y=function(h,s,a){var e=this.x+this.dx*h,n=this.y+this.dy*h;i.M.x,i.M.dx,i.M.y,i.M.dy;if(this.P()&&!this.muerto){i.M.$=i.u()+2e3;var r=this.x+this.o/2,o=this.y+this.m/2;i._.push(new t(r,o,!0))}var l=[[,,1,,,,1,1,,,],[,1,1,1,1,1,1,1,1,1,1],[,,1,1,1,1,1,1,1,1,1],[,,,1,,,,,,,],[,,,1,,,,,,,],[,,1,1,,,,,,,]],d=[[,,,1,1,,,,1,,],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,,],[,,,,,,,1,,,],[,,,,,,,1,,,],[,,,,,,,1,1,,]],u=[];u[0]=[[,1,,,1,,]],u[1]=[[,,1,,1,,]],this.muerto?this.muriendo>i.u()?this.last_left?this.angulo=this.angulo+1:this.angulo=this.angulo-1:this.last_left?this.angulo=90:this.angulo=-90:this.jumping?(this.que_pie=1,this.angulo=0):Math.abs(this.dx)>0?i.aa(a,40)<.5?(this.que_pie=0,this.angulo=-2):(this.que_pie=1,this.angulo=2):this.angulo=0,s.save(),s.translate(e,n),s.rotate(this.angulo*Math.PI/180);var c=this.J,f=0,m=0;this.last_left&&(c=this.K,d,this.o);var y=0,x=0,b=0;x=Math.abs(this.x-i.M.centro_x),b=Math.abs(this.y-i.M.centro_y),y=Math.sqrt(x*x+b*b);var M=1-y/250,v="rgba(255, 153, 153, "+M+")";if(this.muerto)if(this.muriendo>i.u()){var g=this.muriendo-i.u();g=(410-g)/3,v="rgba(255, 255, 255, 1)";var _=10*(Math.random()-.5),p=10*(Math.random()-.5),w=10*(Math.random()-.5),P=Math.random()*g+this.m/2,I=Math.random()*g+this.m/2,C=Math.random()*g+this.m/2,S=Math.floor(155*Math.random())+100;s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.1)",s.arc(_,p,P,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.2)",s.arc(p,w,I,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.3)",s.arc(w,_,C,2*Math.PI,0,!1),s.closePath(),s.fill(),f=0,m=0}else this.last_left?(d,f=-50,m=20,v="rgba(200, 193, 255, "+M/4+")"):(l,f=-30,m=-50,v="rgba(200, 193, 255, "+M/4+")");i.ba(s,m,f,c,this.size_enemigo_pixel,v),this.muerto||i.ba(s,0,this.m-this.size_enemigo_pixel,u[this.que_pie],this.size_enemigo_pixel,v),s.restore()},this.ca=function(){for(var t=this.x;t<this.x+this.o;t++)for(var h=this.y-5;h<this.y+this.m;h++)if(i.X(t,h))return!0;return!1},this.da=function(){this.x=i.e(200,i.A-200),this.y=i.e(0,i.O/2)},this.R=function(){var t=!1;return this.y+this.m>i.O-15?t=!1:this.last_left?!i.X(this.x-5,this.y+this.m+15)&&i.X(this.x,this.y+this.m+15)&&(t=!0):!i.X(this.x+this.o+5,this.y+this.m+15)&&i.X(this.x+this.o,this.y+this.m+15)&&(t=!0),t},this.S=function(){var t=!1;if(this.last_left)for(var h=this.y-2*this.m;h<=this.y+this.m/2;h++)i.X(this.x+this.o+20,h)&&!i.X(this.x+this.o,h)&&(t=!0);else for(var h=this.y-2*this.m;h<=this.y+this.m/2;h++)i.X(this.x-20,h)&&!i.X(this.x,h)&&(t=!0);return t},this.T=function(){var t=!1,h=!1,s=!1;if(this.last_left)for(var a=this.y-this.m;a<=this.y+this.m-5;a++)i.X(this.x-5,a)&&(h=!0),i.X(this.x-5,a)||(t=!0);else for(var e=this.y-this.m;e<=this.y+this.m-5;e++)i.X(this.x+this.o+5,e)&&(s=!0),i.X(this.x+this.o+5,e)||(t=!0);return t&&(h||s)},this.P=function(){return i.ea(this.x,this.y,this.o,this.m,i.M.x,i.M.y,i.M.o,i.M.m)}},e=function(t,i,s,a,e,n){this.que_pie=0,this.angulo=0,this.size_player_pixel=4,this.x=i,this.y=s,this.m=12*this.size_player_pixel,this.o=6*this.size_player_pixel+5,this.centro_x=this.x+this.o/2,this.centro_y=this.y+this.m/2,this.dx=0,this.dy=0,this.fa=850,this.ga=850,this.ha=2500,this.v=220,this.w=550,this.ia=!1,this.s=1e3,this.t=t.u(),this.$=t.u(),this.q=4e4,this.z=t.A+this.o,this.B=-this.o,this.C=0,this.ja=n,this.Q=n,this.L=t.u(),this.ka=t.u(),this.la=function(i){if(this.Q<0)return void t.ma(!1);if(t.N>t.u())return t.na.x=30,t.na.y=t.O-100,void(t.oa=!1);if(!t.oa){for(t.pa(t.na);t.qa(t.na);)t.pa(t.na);t.oa=!0}if(!(this.L>t.u())){this.ka>t.u()&&(this.Q=this.Q+1,this.Q>=t.ja&&(this.Q=this.ja)),t.ra||this.sa()&&(t.ta=!0,this.L=t.u()+3e3,window.levelup_audio2.play()),this.ua()&&this.ka<t.u()&&(this.ka=t.u()+2e3),this.centro_x=this.x+this.o/2,this.centro_y=this.y+this.m/2,this.wasleft=this.dx<0,this.wasright=this.dx>0;var s=this.fa*(this.falling?.2:1),a=this.ga;if(this.ddx=0,this.ddy=this.s,this.left?(this.ddx=this.ddx-a,this.ia=!0):this.wasleft&&(this.ddx=this.ddx+s),this.right?(this.ddx=this.ddx+a,this.ia=!1):this.wasright&&(this.ddx=this.ddx-s),this.jump&&!this.jumping&&this.t<t.u()&&(this.ddy=this.ddy-this.q,this.jumping=!0,this.falling=!0,this.t=t.u()+300),this.accion&&t.counter>this.C){this.va(),this.C=t.counter+3,t.wa=t.u()+20;var e=!0,n=this.ha;this.jumping&&(n/=2),this.ia?(e=!1,this.ddx=this.ddx+n):this.ddx=this.ddx-n;var r=this;setTimeout(function(){t.xa.push(new h(r.x,r.y-10,-10,-3,e,t,r))},i/3),setTimeout(function(){t.xa.push(new h(r.x,r.y+10,10,3,e,t,r))},2*i/3),t.xa.push(new h(this.x,this.y,0,0,e,t,this))}var o=10*this.ha,l=this.ha;this.$-t.u()>1900&&(this.ddx=this.ddx+o*(.5-Math.random()),this.ddy=this.ddy+l*(.5-Math.random())),this.x=this.x+i*this.dx,this.y=this.y+i*this.dy,this.dx=t.U(this.dx+i*this.ddx,-this.v,this.v),this.dy=t.U(this.dy+i*this.ddy,-this.w,this.w),(this.wasleft&&this.dx>0||this.wasright&&this.dx<0)&&(this.dx=0);for(var d=(this.y+this.m)%t.W.V,u=this.y%t.W.V,c=!1,f=this.x+5;f<=this.x+this.o-5;f++)t.X(f,this.y-2)&&(c=!0);for(var m=!1,y=this.x+5;y<=this.x+this.o-5;y++)t.X(y,this.y+this.m)&&(m=!0);for(var x=!1,b=this.y+5;b<=this.y+this.m-5;b++)t.X(this.x-6,b)&&(x=!0);for(var M=!1,v=this.y+5;v<=this.y+this.m-5;v++)t.X(this.x+this.o+2,v)&&(M=!0);this.dy>=0?(this.y+this.m>t.O&&(this.y=t.O-this.m,this.dy=0,this.jumping=!1,this.falling=!1),m&&(this.dy=0,this.jumping=!1,this.falling=!1,d&&(this.y=20*Math.floor((this.y+this.m)/20)-this.m))):this.dy<0&&c&&u&&(this.dy=0),this.dx>0?(this.x+this.o>=this.z&&(this.x=10),M&&(this.dx=0)):this.dx<0&&(this.x<=this.B&&(this.x=t.A-this.o,this.y=this.y-20),x&&(this.dx=0))}},this.ya=function(i,h,s,a){t.N>t.u()&&this.za();var e=this.x+this.dx*i,n=this.y+this.dy*i,r=[[,1,,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],o=[[,,,,1],[1,1,1,1,1],[1,1,1,1,1],[,,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],l=[[,,1,,,,1,1,,,],[,1,1,1,1,1,1,1,1,1,1],[,,1,1,1,1,1,1,1,1,1],[,,,1,,,,,,,],[,,,1,,,,,,,],[,,1,1,,,,,,,]],d=[[,,,1,1,,,,1,,],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,,],[,,,,,,,1,,,],[,,,,,,,1,,,],[,,,,,,,1,1,,]],u=[];u[0]=[[,,1,,,1]],u[1]=[[,,1,,1,,]],u[2]=[[1,,,1,,,]],u[3]=[[,1,,1,,,]];t.N>t.u()?(this.angulo*=-1.1,this.angulo+=-1,opacidad_jugador=300/(t.N-t.u()),opacidad_jugador>1&&(opacidad_jugador=1),this.angulo=1e3*(opacidad_jugador-1)):this.L>t.u()?(a?(a=-1*a*1.1,this.angulo=a+-1,h.globalAlpha-=.009):(this.angulo*=-1.1,this.angulo+=-1,h.globalAlpha-=.005),opacidad_jugador-=.01):(opacidad_jugador=1,this.jumping?(this.que_pie=1,this.angulo=0):this.left||this.right?t.aa(s,30)<.5?(this.left?this.que_pie=2:this.que_pie=0,this.angulo=-2):this.left?(this.que_pie=3,this.angulo=2):(this.que_pie=1,this.angulo=2):this.angulo=0),h.save(),h.translate(e+this.o/2,n+this.m/2),radius=t.A/3,h.beginPath(),h.arc(0,0,300,0,2*Math.PI,!1);var c=h.createRadialGradient(0,0,.9*radius,this.o/2,this.m/2,0);if(this.$-t.u()>1700){var f=Math.random()/2;c.addColorStop(0,"rgba(255, 11, 11, 0)"),c.addColorStop(1,"rgba(255, 11, 11, "+f+")")}else this.ka>t.u()?(c.addColorStop(0,"rgba(122, 255, 122, 0)"),c.addColorStop(1,"rgba(122, 255, 122, 0.2)")):(c.addColorStop(0,"rgba(251, 255, 243, 0)"),c.addColorStop(1,"rgba(251, 255, 243, 0.6)"));h.fillStyle=c,h.fill(),h.rotate(this.angulo*Math.PI/180);var m=r,y=l,x=-5;this.ia&&(m=o,y=d,x=5-this.o),h.translate(-this.o/2,-this.m/2);var b="rgba(210,228,241,"+opacidad_jugador+")";t.ba(h,0,0,m,this.size_player_pixel,b),t.ba(h,0,this.m-this.size_player_pixel,u[this.que_pie],this.size_player_pixel,b),this.Aa=0;var M="rgba(143,172,192,"+opacidad_jugador+")";if(h.translate(this.o/2.5,this.m/2),h.rotate(this.angulo*Math.PI/180),t.ba(h,x,0,y,3,M),h.restore(),this.$>t.u()||this.ka>t.u()){var v=this.$;this.ka>this.$&&(v=this.ka);var g=v-t.u(),_=g/2e3,p=2*this.o,w=this.Q/t.ja;h.fillStyle="rgba(11, 204, 0, "+_+")",w<.8&&(h.fillStyle="rgba(224, 239, 20, "+_+")"),w<.6&&(h.fillStyle="rgba(204, 199, 0, "+_+")"),w<.4&&(h.fillStyle="rgba(239, 92, 20, "+_+")"),w<.2&&(h.fillStyle="rgba(255, 0, 0, "+_+")"),h.fillRect(e-this.o/2,n-10,w*p,5),h.strokeStyle="rgba(255,255,255,"+_+")",h.lineWidth=1,h.strokeRect(e-this.o/2,n-10,p,5)}return this.angulo},this.va=function(){window.disparo_audio.play(),setTimeout(function(){window.disparo_audio2.play()},150*Math.random())},this.za=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,1,1,1,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,1,,1,1,,1,1,,,,,1,,,1,1,,,1],[1,,,1,1,1,1,,1,1,,1,,1,1,,1,,1,,1,1,1,1,,,1,1,,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,,,,1,,1,1,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-60;t.ba(t.ctx,h,s,i,3,"#ffffff")},this.Ba=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,1,,1,1,1,1,,1,1,,,1],[1,,,1,1,,,1,,1,1,,1,,1,1,,,1],[1,,,1,1,1,,1,,1,1,,1,,1,1,,,1],[1,,,1,1,,1,1,,1,1,,1,,1,1,,,1],[1,,,1,1,,,1,,1,1,1,1,,,,,,1],[1,,,1,1,,,1,,1,1,1,1,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-60;t.ba(t.ctx,h,s,i,3,"#ffffff")},this.sa=function(){var i=t.na.x+t.na.o/3,h=t.na.y+t.na.o/3,s=t.na.o/3,a=t.na.o/3;return t.ea(this.x,this.y,this.o,this.m,i,h,s,a)},this.ua=function(){if(!t.ra){if(void 0===t.Ca.x)return!1;return t.ea(this.x,this.y,this.o,this.m,t.Ca.x,t.Ca.y,t.Ca.o,t.Ca.m)}}},n={songData:[{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[1,2,3,4,5,6,7,8,7,9],c:[{n:[122,120,122,110,,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,122,120,122,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,125,124,125],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,120,122,120,110,,110,,110,,,,125,124,125,,,125,124,125,,,,,129,127,129,117,,132,134,122],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,,110,117,116,115,113,119,118,117,116,120,122,120,110,,110,,110],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,117,116,119,118,117,116,115,114,113,112,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,117,116,119,118,121,120,123,124,126,127,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,,117,119,113,,,116,111,,,112,112,,112,124,,,124],f:[]},{n:[,124,124,,122,124,125,122,124,,112,,124,,,124,,124,112,,120,119,117,110,,,110,,,,110,110],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110,,112,,112,,124,,112,124],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110],f:[]}]},{i:[0,160,128,1,0,160,128,0,1,210,4,7,41,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],p:[1,2,3,4,5,6,7,8,7,9,10],c:[{n:[134,132,134,122,,122,,134,132,134,122,,134,132,134,122,,122,,134,132,134,122,,132,134,122,,134,132,134,122],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,118,,,,142,,,118],f:[]},{n:[,,118,,142,,,118,118,,,,142,,,118,,,,,142,118,,,118,,,,142,,,118],f:[]},{n:[118,,,,142,,,118,118,118,,,142,,118,,118,,,118,142,,,,118,118,,,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,,142,118,,,142,118,,,118,118,,118,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,118,142,118,,,142,118,,,118,118,,118,142,,,118],f:[]},{n:[,118,118,,142,,118,,118,,,,142,,118,,118,118,,,142,118,118,118,,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,,118,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,118,,,,,118],f:[]},{n:[118,,,,118,,,,154],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,2,1,1,1,1,1,1,1,1],c:[{n:[154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,154,,154,,154,,154],f:[]}]},{i:[0,255,128,0,0,154,128,9,0,0,7,5,52,0,0,0,61,0,0,2,255,0,0,32,47,3,163,4],p:[,2,3,4,5,6,7,8,9,10],c:[{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,156,,,155,,,153],f:[]},{n:[,,,,,,151,153,149,,,,,,,,151,,,,,,,,149,,,148,,,146],f:[]},{n:[,,,,,,144,146,143,,,,,,,,139,,,,137,,,,141,,,,,,140],f:[]},{n:[,,,,137,,,,,,140,137,136,,141,140,143,142,145,144,147,148,150,151,141,,,,,,140],f:[]},{n:[,,,,141,,143,,,,144,,,,146,,,,148,149,152,,,,148,,,146,,,144],f:[]},{n:[143,,,,,,141,143,144,,,,,146,144,143,,,,,,,,144,,,,,,,,143],f:[]},{n:[,,143,,,,141,,,,141,,,,,137,141,137,136,,,,,,153,,,149,,,148],f:[]},{n:[148,,,,,,146,148,149,,,,,153,149,148,,,,,,,,134,,,,,137,,,128],f:[]},{n:[,,,,137,,,127,,,,,137,,,125,,,,,124,,,123],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,131,7],p:[,,,,,,,,,1,2],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],f:[]},{n:[,,,,,,,,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,122],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:5513,patternLen:32,endPattern:12},r={songData:[{i:[2,0,128,1,2,68,128,0,1,55,4,4,40,105,4,1,125,4,1,3,67,115,124,190,67,6,39,1],p:[1],c:[{n:[111],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:827,patternLen:32,endPattern:2},o={songData:[{i:[1,192,128,1,1,191,116,9,1,0,68,32,34,204,4,0,69,3,1,1,23,167,0,32,121,14,25,6],p:[1],c:[{n:[147,,151,,,147,,,,151,,,,,,,159,,,,,,,,,,,,,,,,,,,,,151,,,,154,,,,,,,163,,,,,,,,,,,,,,,,,,,,,154,,,,,,,,,,,166,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,171],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:2e3,patternLen:32,endPattern:2},l={songData:[{i:[3,170,128,0,3,156,128,0,1,218,4,24,59,0,0,1,55,4,1,2,67,115,124,190,67,6,127,6],p:[1],c:[{n:[128],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:400,patternLen:32,endPattern:2},d=function(){var t,i,h,s,a,e=function(t){return Math.sin(6.283184*t)},n=function(t){return t%1*2-1},r=function(t){return t%1<.5?1:-1},o=function(t){var i=t%1*4;return i<2?i-1:3-i},l=function(t){return.003959503758*Math.pow(2,(t-128)/12)},d=function(t,i,h){var s,a,e,n,r,o,d,c=u[t.i[0]],f=t.i[1],m=t.i[3],y=u[t.i[4]],x=t.i[5],b=t.i[8],M=t.i[9],v=t.i[10]*t.i[10]*4,g=t.i[11]*t.i[11]*4,_=t.i[12]*t.i[12]*4,p=1/_,w=t.i[13],P=h*Math.pow(2,2-t.i[14]),I=new Int32Array(v+g+_),C=0,S=0;for(s=0,a=0;s<v+g+_;s++,a++)a>=0&&(w=w>>8|(255&w)<<4,a-=P,o=l(i+(15&w)+t.i[2]-128),d=l(i+(15&w)+t.i[6]-128)*(1+8e-4*t.i[7])),e=1,s<v?e=s/v:s>=v+g&&(e-=(s-v-g)*p),n=o,m&&(n*=e*e),C+=n,r=c(C)*f,n=d,b&&(n*=e*e),S+=n,r+=y(S)*x,M&&(r+=(2*Math.random()-1)*M),I[s]=80*r*e|0;return I},u=[e,r,n,o];this.init=function(e){t=e,i=e.endPattern-2,h=0,s=e.rowLen*e.patternLen*(i+1)*2,a=new Int32Array(s)},this.generate=function(){var n,r,o,l,c,f,m,y,x,b,M,v,g,_,p=new Int32Array(s),w=t.songData[h],P=t.rowLen,I=t.patternLen,C=0,S=0,E=!1,j=[];for(o=0;o<=i;++o)for(m=w.p[o],l=0;l<I;++l){var L=m?w.c[m-1].f[l]:0;L&&(w.i[L-1]=w.c[m-1].f[l+I]||0,L<15&&(j=[]));var A=u[w.i[15]],W=w.i[16]/512,k=Math.pow(2,w.i[17]-9)/P,X=w.i[18],q=w.i[19],R=43.23529*w.i[20]*3.141592/44100,z=1-w.i[21]/255,O=1e-5*w.i[22],D=w.i[23]/32,B=w.i[24]/512,H=6.283184*Math.pow(2,w.i[25]-9)/P,N=w.i[26]/255,U=w.i[27]*P;for(M=(o*I+l)*P,c=0;c<4;++c)if(f=m?w.c[m-1].n[l+c*I]:0){j[f]||(j[f]=d(w,f,P));var J=j[f];for(r=0,n=2*M;r<J.length;r++,n+=2)p[n]+=J[r]}for(r=0;r<P;r++)y=2*(M+r),b=p[y],b||E?(v=R,X&&(v*=A(k*y)*W+.5),v=1.5*Math.sin(v),C+=v*S,g=z*(b-S)-C,S+=v*g,b=3==q?S:1==q?g:C,O&&(b*=O,b=b<1?b>-1?e(.25*b):-1:1,b/=O),b*=D,E=b*b>1e-5,x=Math.sin(H*y)*B+.5,_=b*(1-x),b*=x):_=0,y>=U&&(_+=p[y-U+1]*N,b+=p[y-U]*N),p[y]=0|_,p[y+1]=0|b,a[y]+=0|_,a[y+1]+=0|b}return++h/8},this.createWave=function(){var t=2*s-8,i=t-36,h=new Uint8Array(44+2*s);h.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(var e=0,n=44;e<s;++e){var r=a[e];r=r<-32767?-32767:r>32767?32767:r,h[n++]=255&r,h[n++]=r>>8&255}return h},this.getData=function(t,i){for(var h=2*Math.floor(44100*t),s=new Array(i),e=0;e<2*i;e+=1){var n=h+e;s[e]=t>0&&n<a.length?a[n]/32768:0}return s}},u=function(){this.u=function(){return(new Date).getTime()},this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.Da=function(t){var i=Math.floor(10*Math.random())+60;t&&(i*=3);var h=[],s=4,a=3,e=!1,n=0,r=0,o=15,l=42;t&&(l=25,o=1);for(var d=0;d<30;d++)for(var u=0;u<42;u++){var c=Math.random();if(u>l);else if(i>0&&d>=s&&u>=r&&c>.3||e){if(n<=a){h.push(1),e=!0,n++;continue}e=!1,n=0,i--,r=(u+5)%l,s=d+3}else!1,e=!1,n=0,a=Math.floor(Math.random()*o)+5;h.push(0)}var f=Math.floor(10*Math.random())+1;t&&(f*=3);for(var m=3,y=42,x=!1,b=0,u=41;u>=0;u--)for(var d=29;d>=0;d--){var c=Math.random(),M=u+42*d;if(f>0&&(u<y&&c>.4&&1===h[M]||x)){if(b<=m){h[M]=1,x=!0,b++;continue}x=!1,b=0,f--,y=u-(Math.floor(10*Math.random())+4)}else x=!1,b=0,m=Math.floor(5*Math.random())+2}for(var d=0;d<6;d++)for(var u=25;u<30;u++){var M=d+42*u;h[M]=0}return h},this.Ea=!1,this.Fa=!1,this.Ga=!1,this.N=!1,this.Ha=220,this.Ia&&(this.Ha=2200),this.W={},this.W.datos,this.W.Ja=20,this.W.V=42,this.W.Ka=30,this.La=0,this.Ma=[],this.A=840,this.O=600,this.Na=840/this.W.Ja,this.Oa=600/this.W.Ja,this.Pa=800,this.KEY={ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,Z:90},this.Qa=60,this.fps_interval=1e3/this.Qa,this.Ra=1/60,this.Sa=document.getElementById("canvas"),this.ctx=this.Sa.getContext("2d"),this.Sa.width=this.A,this.Sa.height=this.O,this._=[],this.xa=[],this.Ta=[],this.Ua=this.u(),this.wa=this.u(),this.ta=!1,this.Va=0,this.ja=250,this.Wa=this.ja,this.Xa=this.u(),this.Ya=0,this.Za=2500,this.$a=function(){return"ontouchstart"in document.documentElement},this._a=function(t,i,h){switch(i){case this.KEY.LEFT:return t.preventDefault(),this.M.left=h,!1;case this.KEY.RIGHT:return t.preventDefault(),this.M.right=h,!1;case this.KEY.UP:return t.preventDefault(),this.M.jump=h,!1;case this.KEY.DOWN:return t.preventDefault(),this.M.down=h,!1;case this.KEY.ENTER:case this.KEY.Z:return t.preventDefault(),this.M.accion=h,!1}},this.U=function(t,i,h){return Math.max(i,Math.min(h,t))},this.ea=function(t,i,h,s,a,e,n,r){return!(t+h-1<a||a+n-1<t||i+s-1<e||e+r-1<i)},this.ab=function(t,i,h,s,a){return(t-h)*(t-h)+(i-s)*(i-s)<=a*a},this.aa=function(t,i){var h=i/2,s=t%i;return s<h?s/h:1-(s-h)/h},this.bb=function(t,i){return this.W.datos[t+i*this.W.V]},this.cb=function(t){return t*this.W.V},this.db=function(t){return Math.floor(t/this.W.Ja)},this.X=function(t,i){return this.bb(this.db(t),this.db(i))},this.eb=function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},this.ba=function(t,i,h,s,a,e,n){if(t.fillStyle=e||"#ffffff",n)var r=this.eb(e);for(var o=i,l=h,d=0,u=0;u<s.length;u++){for(var c=s[u],f=0;f<c.length;f++)if(c[f])if(n){var m=0,y=0,x=0;y=Math.abs(o+f*a-this.M.centro_x),x=Math.abs(l-this.M.centro_y),m=Math.sqrt(y*y+x*x);var b=1-m/(2.5*this.Ha);if(m>2.5*this.Ha)continue;t.fillStyle="rgba("+r.r+","+r.g+","+r.b+","+b+")",t.fillRect(o+f*a,l,a,a)}else t.fillRect(o+f*a,l,1.1*a,1.1*a);d=Math.max(d,c.length*a),l+=a}o+=a+d},this.fb=function(t,i){this.La=0,this.Ma=[],this._=[],this.ra=t,this.W.datos=this.Da(this.ra),this.ctx.globalAlpha=1;var h=1500;if(i&&(h=i),this.N=this.u()+h,this.M=new e(this,40,this.O-100,1e3,3e4,this.Wa),this.ra)this.gb=new Boss(this,this.A/1.5,100,800,3e4,1);else{for(this.Ya++,this.na={},this.na.o=this.M.m,this.na.m=this.M.m,this.pa(this.na);this.qa(this.na);)this.pa(this.na);if(this.Ca={},Math.random()>.7)for(this.Ca.o=this.M.m/2,this.Ca.m=this.M.m/2,this.hb(this.Ca);this.ib(this.Ca);)this.hb(this.Ca);var s=1+2*this.Ya,n=5+2*this.Ya;this.La=this.e(s,n);for(var r=this.e(0,4),o=0;o<this.La;o++){for(var l=this.e(200,this.A-200),d=this.e(0,this.O/2),u=new a(this,l,d,r);u.ca();)u.da();this.Ma.push(u)}}},this.qa=function(t){for(var i=t.x;i<t.x+t.o;i++)for(var h=t.y-5;h<t.y+t.m;h++)if(this.X(i,h))return!0;return!1},this.pa=function(t){t.x=this.e(this.M.o,this.A-this.M.o),t.y=this.e(0,this.O/1.5)},this.ib=function(t){for(var i=t.x;i<t.x+t.o;i++)for(var h=t.y-5;h<t.y+t.m;h++)if(this.X(i,h))return!0;return!1},this.hb=function(t){t.x=this.e(this.M.o,this.A-this.M.o),t.y=this.e(0,this.O/1.5)},this.jb=function(){},this.ma=function(t){var i;i=t?[[1,1,,1,1,,1,1,1,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,,,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,1,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,,1,,1,,1,,1,1,,1,1,,1,1,,,,,,,,],[,1,1,1,,,1,1,1,1,,1,1,1,1,,,,,,1,,1,,,1,1,,1,1,,,1,,,1,,1,,1]]:[[1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,,,1,1,,1,,1,1,1,1,,1,1,,,,,,1,1,,1,,1,1,,1,,1,1,,,,1,1,,1],[1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,,,,,1,1,,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,1,,1,1,,1,,1,1,,1,,1,1,,,,,,1,1,,1,,,1,,1,,1,1,,,,1,1,1],[1,1,1,1,,1,1,,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,,,1,,,1,1,1,1,,1,1,,1]],this.ba(this.ctx,this.A/2-330,250,i,16),this.Ga=!0},this.la=function(t){if(this.Wa=this.M.Q,this.kb(),this.ta&&this.M.L<this.u()){this.ta=!1,this.ctx.globalAlpha=1,this.Va++;var i=!1;this.Va>5&&Math.random()>.7&&(i=!0),this.fb(i)}if(this.M.la(t),this.ra)this.gb.la(t);else for(var h=0;h<this.Ma.length;h++)this.Ma[h].update(t)},this.kb=function(){this.Xa<this.u()&&(this.Qa=60,this.fps_interval=1e3/this.Qa)},this.lb=function(t,i,h){if(this.Ga)return void this.mb(t);t.clearRect(0,0,this.A,this.O),this.mb(t),this.nb(t,h),this.ob(t,h),this.ra||(this.pb(t),this.qb(t)),this.rb(t,h,!0),this.sb(t),this.tb(t),this.ra&&this.ub(t),this.vb(t,h)},this.wb=function(){if(this.wa>this.u()){var t=4;this.Ua>this.u()&&(t*=10),this.ctx.save(),this.dx_shacke||this.dy_shacke?(this.Ua>this.u()&&(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.gb?this.gb.xb>this.u()&&(this.dx_shacke=(Math.random()-.5)*t*2,this.dy_shacke=(Math.random()-.5)*t*2):(this.dy_shacke=-.9*this.dy_shacke,this.dx_shacke=-.9*this.dx_shacke)):(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.ctx.translate(this.dx_shacke,this.dy_shacke)}else this.dx_shacke=0,this.dy_shacke=0},this.yb=function(){this.ctx.restore()},this.rb=function(t,i,h){var s,a,e=0;this.M.centro_y-this.Ha>0&&(e=Math.floor((this.M.centro_y-this.Ha)/this.W.Ja));var n=Math.floor(this.O/this.W.Ja);this.M.centro_y+this.Ha<this.O&&(n=Math.floor((this.M.centro_y+this.Ha)/this.W.Ja));var r=0;this.M.centro_x-this.Ha>0&&(r=Math.floor((this.M.centro_x-this.Ha)/this.W.Ja));var o=Math.floor(this.A/this.W.Ja);this.M.centro_x+this.Ha<this.A&&(o=Math.floor((this.M.centro_x+this.Ha)/this.W.Ja));var l=0,d=0,u=0;for(a=e;a<=n;a++)for(s=r;s<=o;s++)this.bb(s,a)&&(d=Math.abs(s-Math.floor(this.M.centro_x/this.W.Ja)),u=Math.abs(a-Math.floor(this.M.centro_y/this.W.Ja)),l=Math.sqrt(d*d+u*u),opacidad=1/l*2.5,h||(opacidad/=2),t.fillStyle="rgba(250,250,250,"+opacidad+")",t.fillRect(s*this.W.Ja,a*this.W.Ja,this.W.Ja,this.W.Ja))},this.pb=function(t){radius=this.na.o;var i=this.na.x+this.na.o/2,h=this.na.y+this.na.m/2,s=0,a=0;if(s=Math.abs(i-this.M.centro_x),a=Math.abs(h-this.M.centro_y),!(Math.sqrt(s*s+a*a)>this.Ha)){var e=t.createRadialGradient(i,h,0,i,h,radius);t.fillStyle=e;for(var n=-2;n<2;n++){var r=i+(.5-Math.random())*n*15,o=h+(.5-Math.random())*n*15,l=this.e(110,255);t.beginPath(),t.arc(r,o,radius,0,2*Math.PI,!1),e.addColorStop(0,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0)"),e.addColorStop(.6,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0)"),e.addColorStop(.8,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0.2)"),e.addColorStop(1,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0.3)"),t.fill()}t.beginPath(),t.arc(i,h,1.2*radius,0,2*Math.PI,!1);var e=t.createRadialGradient(i,h,0,i,h,1.2*radius);e.addColorStop(0,"rgba(209,127,140, 0.2)"),e.addColorStop(.8,"rgba(209,127,140, 0.1)"),e.addColorStop(1,"rgba(209,127,140, 0)"),t.fillStyle=e,t.fill()}},this.qb=function(t){var i=0,h=0,s=0,a=this.Ca.x+this.Ca.o/2,e=this.Ca.y+this.Ca.m/2;h=Math.abs(a-this.M.centro_x),s=Math.abs(e-this.M.centro_y),i=Math.sqrt(h*h+s*s);var n=this.M.ka-this.u()
;if(!(n<0))return n/=1e3,void(n<.5?this.Ca={}:(t.strokeStyle="#ffffff",t.lineWidth=20*n+10,lejos_quitar=50*(1-n),t.strokeRect(this.Ca.x-lejos_quitar,this.Ca.y-lejos_quitar,this.Ca.m+2*lejos_quitar,this.Ca.m+2*lejos_quitar)));if(n=1,!(i>this.Ha)){var r=this.aa(this.counter,80),o=this.aa(this.counter,60),l=5*r+2,d=10*o;t.fillStyle="rgba(255,110,110,"+((1-r)/2+.5*n/2)+")";var u=this.Ca.x,c=this.Ca.y+this.Ca.m/3;t.fillRect(u,c,this.Ca.o,this.Ca.m/3);var f=this.Ca.x+this.Ca.m/3,m=this.Ca.y;t.fillRect(f,m,this.Ca.o/3,this.Ca.m),t.strokeStyle="rgba(255,255,155,"+(r/7+.1*n/2)+")",t.lineWidth=8,t.strokeRect(this.Ca.x-l,this.Ca.y-l,this.Ca.m+2*l,this.Ca.m+2*l),t.strokeStyle="rgba(133,200,133,"+(r/7+.1*n/2)+")",t.lineWidth=15,t.strokeRect(this.Ca.x-d,this.Ca.y-d,this.Ca.m+2*d,this.Ca.m+2*d)}},this.zb=0,this.ub=function(t){if(this.gb.xb>this.u()){var i=this.gb.xb-this.u(),h=Math.floor(i/this.Za*40);h=40-h;this.zb=h%20,this.zb>10&&(this.zb=20-this.zb);var s=9*this.zb,a=this.A/40*2,e=this.A/40*h,n=t.createLinearGradient(0,this.O-100,0,this.O);n.addColorStop(0,"rgba(186,186,186,0.3)"),n.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n;var r=10*(Math.random()-.5),o=10*(Math.random()-.5),l=10*(Math.random()-.5),d=e;t.fillRect(this.gb.x-e+o,this.O-s+15+r,a,s+r),e=this.A/40*(h-2),alto_ola_n=.7*s+r,t.fillRect(this.gb.x-e+r,this.O-alto_ola_n+15+o,a,alto_ola_n+o),e=this.A/40*(h-4),alto_ola_n=.4*s+o,t.fillRect(this.gb.x-e+10*(Math.random()-.5),this.O-alto_ola_n+5,a,alto_ola_n),e=this.A/40*(h+2),alto_ola_n=.7*s+l,t.fillRect(this.gb.x-e+r,this.O-alto_ola_n+15,a,alto_ola_n),e=this.A/40*(h+4),alto_ola_n=.4*s+o,t.fillRect(this.gb.x-e+l,this.O-alto_ola_n+15,a,alto_ola_n),x_empieza_terremoto=this.gb.x-d+o,x_final_terremoto=this.gb.x-e+l,this.M.centro_x<x_empieza_terremoto&&this.M.centro_x>x_final_terremoto&&this.M.centro_y>this.O-100&&(this.M.Q=this.M.Q-5,this.M.$=this.u()+2200)}},this.vb=function(t,i){this.M.ya(i,t,this.counter)},this.nb=function(t,i){for(var h=0,s=0,a=0;a<this.Ma.length;a++)h=Math.abs(this.Ma[a].x-this.M.centro_x),s=Math.abs(this.Ma[a].y-this.M.centro_y),distancia_jugador=Math.sqrt(h*h+s*s),distancia_jugador<this.Ha&&this.Ma[a].Y(i,t,this.counter)},this.ob=function(t,i){this.ra&&this.gb.Ab(i,t,this.counter)},this.mb=function(t){if(0!==this._.length)for(var i=0;i<this._.length;i++){var h=this._[i],s=h.a;if(0===s.length)return void this._.splice(i,1);for(var a=s.slice(),e=0;e<s.length;e++){var n=s[e],r=0,o=0,l=0;if(o=Math.abs(n.x-this.M.centro_x),l=Math.abs(n.y-this.M.centro_y),!((r=Math.sqrt(o*o+l*l))>300)){var d=(1-r/150)*n.opacidad,u=!1;n.xv>0?n.max_x-n.x<0&&(u=!0):n.x-n.max_x<0&&(u=!0),n.yv>0?n.max_y-n.y<0&&(u=!0):n.y-n.max_y<0&&(u=!0),u||(d*=20),t.beginPath(),t.arc(n.x,n.y,n.size,2*Math.PI,0,!1),t.fillStyle="rgba("+n.r+","+n.g+","+n.b+","+d+")",t.fill(),n.size<=2||u||(n.x+=n.xv,n.y+=n.yv,n.size-=.1)}}h.a=a}},this.sb=function(i){for(var h=0;h<this.xa.length;h++){var s=this.xa[h],a=8*s.size,e=0,n=0,r=0;if(n=Math.abs(s.x-this.M.centro_x),r=Math.abs(s.y-this.M.centro_y),(e=Math.sqrt(n*n+r*r))<1.2*this.Ha){if(this.ra){if(this.ea(this.gb.x,this.gb.y,this.gb.o,this.gb.m,s.x-a/2,s.y-a/2,a,a)){var o=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),c=45*Math.random(),f=45*Math.random(),m=Math.floor(155*Math.random())+100;i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+o,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+l,s.y+d,c,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+d,s.y+o,f,2*Math.PI,0,!1),i.closePath(),i.fill(),this.xa.splice(h,1),this.gb.Bb=this.u()+400;continue}}else for(var y=0;y<this.La;y++)if(!this.Ma[y].muerto&&this.u()>this.Ma[y].muriendo&&this.ea(this.Ma[y].x,this.Ma[y].y,this.Ma[y].o,this.Ma[y].m,s.x-a/2,s.y-a/2,a,a)){this.Ua=this.u()+200;var o=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),c=45*Math.random(),f=45*Math.random(),m=Math.floor(155*Math.random())+100;i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+o,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+l,s.y+d,c,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+d,s.y+o,f,2*Math.PI,0,!1),i.closePath(),i.fill();var x=this.Ma[y].x+this.Ma[y].o/2,b=this.Ma[y].y+this.Ma[y].m/2;this._.push(new t(x,b,!1)),this.xa.splice(h,1),this.Ma[y].muriendo=this.u()+400,this.Ma[y].muerto=!0}else;if(this.X(s.x,s.y)||this.X(s.x-5,s.y)||this.X(s.x+5,s.y)||this.X(s.x-10,s.y)||this.X(s.x+10,s.y)||this.X(s.x-15,s.y)||this.X(s.x+15,s.y)){var o=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),c=45*Math.random(),f=45*Math.random(),m=Math.floor(255*Math.random());i.beginPath(),i.fillStyle="rgba(255,"+m+",0,0.1)",i.arc(s.x+o,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",0.1)",i.arc(s.x+l,s.y+d,c,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",0.1)",i.arc(s.x+d,s.y+o,f,2*Math.PI,0,!1),i.closePath(),i.fill(),this.xa.splice(h,1);continue}1===s.size&&(i.beginPath(),i.fillStyle="rgba(255,255,255,0.4)",i.arc(s.x,s.y,5*a,2*Math.PI,0,!1),i.closePath(),i.fill());var M=1-e/(1.2*this.Ha),v=1.14*a;i.beginPath();var g=1;s.xv<0&&(g=-1),i.fillStyle="rgba(255,255,0,"+M/24+")",i.arc(s.x,s.y,.8*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,20,"+M/20+")",i.arc(s.x+2*g,s.y,.85*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,40,"+M/16+")",i.arc(s.x+4*g,s.y,.9*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,60,"+M/12+")",i.arc(s.x+6*g,s.y,.92*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,80,"+M/8+")",i.arc(s.x+8*g,s.y,.94*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,100,"+M/4+")",i.arc(s.x+10*g,s.y,.96*v,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,120,"+M+")",i.arc(s.x+12*g,s.y,.98*v,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(250,250,250,"+M/2+")",i.arc(s.x+12*g,s.y,v,2*Math.PI,0,!1),i.arc(s.x+14*g,s.y,v,2*Math.PI,0,!1),i.closePath(),i.fill()}s.x>this.A||s.x<0?this.xa.splice(h,1):(s.x+=s.xv,s.y+=s.yv,s.size-=.004)}},this.tb=function(t){for(var i=0;i<this.Ta.length;i++){var h=this.Ta[i],s=100*h.size;h.xv<0&&-1;var a=!0;if(h.Cb>this.u()){var e=10*(Math.random()-.5),n=10*(Math.random()-.5),r=(Math.random(),80*Math.random());this.ab(this.M.centro_x,this.M.centro_y,h.x,h.y,r)&&!h.Db&&(this.M.Q-=5,this.M.$=this.u()+2e3);var o=Math.floor(255*Math.random());t.beginPath(),t.fillStyle="rgba(0,0,"+o+",0,0.1)",t.arc(h.x+e+s/2,h.y+n+s/2,r,2*Math.PI,0,!1),t.closePath(),t.fill(),a=!1}else h.Eb&&(h.Db=!0);if(h.Db)this.Ta.splice(i,1);else{(this.X(h.x,h.y)||this.X(h.x-5,h.y)||this.X(h.x-10,h.y)||this.X(h.x-15,h.y)||this.X(h.x,h.y-5)||this.X(h.x,h.y-10)||this.X(h.x,h.y+5)||this.X(h.x,h.y+10)||this.X(h.x,h.y+20)||this.X(h.x,h.y+30)||this.X(h.x,h.y+40)||this.X(h.x,h.y+50)||this.ea(this.M.x,this.M.y,this.M.o,this.M.m,h.x-s/2,h.y-s/2,s,s))&&!h.Eb&&(h.Cb=this.u()+500,h.Eb=!0);var l=[[,,,,,,,],[,,,,,,,],[,,,1,1,,,],[,1,1,1,1,,,],[1,1,1,1,1,,,],[1,1,1,1,1,1,1,1],[,,,,,,,],[,,,,,,,]];t.beginPath(),t.fillStyle="rgba(250,0,0,0.01)",t.arc(h.x,h.y,s,2*Math.PI,0,!1),t.closePath(),t.fill();var d=h.x+8*l[0].length/2,u=h.y+8*l[0].length/2;h.x,l[0].length,h.y,l[0].length;t.save(),t.translate(d,u),t.rotate(h.angulo*Math.PI/180);var c=-8*l[0].length/2;t.arc(0,0,70,0,2*Math.PI,!1);var f=t.createRadialGradient(0,0,70,0,0,0);f.addColorStop(0,"rgba(151, 110, 143, 0)"),f.addColorStop(1,"rgba(151, 110, 143, 0.6)"),t.fillStyle=f,t.fill();var m="rgba(251, 110, 143, 0.7)";if(!a){m="rgba(251, 110, 143, "+(h.Cb-this.u())/2500+")"}this.ba(t,c,c,l,8,m),t.restore(),h.x>this.A||h.x<0?this.Ta.splice(i,1):a&&(h.x+=h.xv,h.y+=h.yv,h.angulo+=h.xv)}}},this.Fb=function(t){var i=[[1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,,,1,1,1,1,,1,1,,,1,,1,1,1,,,,,1,1,1,1,,1,1,,,1,,1,1,1,1,,,1,1,1,1,,,1,1,,,1,1],[1,1,,,,1,1,,1,,1,1,,,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,,1,,,,1,1,,1,,1,1,,,1,,1,1,,,,,1,1,,1,,,,1,1,1,1,,],[1,1,,,,1,1,,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,1,,1,,1,1,,1,,,,1,1,,1,,1,1,1,,1,,1,1,,1,1,,1,1,1,,,,,,1,1,,,],[1,1,,,,1,1,,1,,,,1,1,,,1,1,,,,,1,1,1,1,,1,1,,1,1,,1,1,,1,,,,1,1,1,1,,1,1,,1,1,,1,1,,,1,,1,1,,1,,,,,1,1,,,],[1,1,1,1,,1,1,1,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,1,1,,1,1,,,1,,,,1,1,,,]],h=this.A/2-8*i[0].length/2,s=[[1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,,,1,1,,1,1,,,1,,1,1,1,1,,,,,,,,,],[1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,,,,1,1,,,1,,1,1,,,,,,,,,,,],[1,1,,,,1,1,,1,,1,1,1,1,,1,1,,1,,1,1,,1,1,1,,1,,1,1,,1,1,,,,,,,,],[1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,1,1,,1,1,,1,1,,1,1,,,1,,,,,,,,],[1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,1,,,1,1,,1,1,,,1,,1,1,1,1,1,,1,,1,,1,,]],a=this.A/2-4*s[0].length/2;this.ba(t,h,180,i,8);var e=this.aa(this.counter,60),n="rgba(255,255,255,"+e+")";this.ba(t,a,260,s,4,n)},this.Gb=function(t,i){i.fillRect((this.A-200)/2,this.O/2-50,200*t,80),i.strokeStyle="#ffffff",i.lineWidth=10,i.strokeRect((this.A-200)/2,this.O/2-50,195,80)},this.Hb=0,this.Ib=this.u()+5e3,this.Jb=this.u(),this.Kb=!1,this.Lb=function(t,i){if(this.Jb<this.u()&&this.Kb)return this.fb(!1,1800),this.jb(),window.audio.play(),void(this.Ea=!0);this.Kb||(this.Mb=this.A/2-200+2*this.counter),this.M=new e(this,this.Mb,this.O/2+100,1e3,3e4,this.Wa),this.na={},this.na.o=this.M.m,this.na.m=this.M.m,this.na.x=this.A/2+150,this.na.y=this.O/2+100,this.M.right=!0,this.M.x>=this.na.x+10&&!this.Kb&&(this.Kb=!0,this.Jb=this.u()+3e3),this.M.x>=this.na.x+10&&(this.M.L=this.u()+3e3),this.pb(t),this.M.za(),this.Hb=this.M.ya(i,t,this.counter,this.Hb)},this.Nb=function(){document.getElementById("controles_mobile").style.display="none",document.getElementById("canvas_mobile").style.display="none";var t=window.innerWidth,i=window.innerHeight;canvas_mobile_gira=document.getElementById("canvas_mobile_gira"),canvas_mobile_gira.style.display="block",ctx_mobile_gira=canvas_mobile_gira.getContext("2d"),canvas_mobile_gira.width=t,canvas_mobile_gira.height=i;var h=[[,,,1,1,1,1,,,,],[,,1,,,,,1,,,],[,1,,,,,,,1,,1],[,1,,,,,,,,1,1],[1,1,1,,,,,,1,1,1],[,,,,,,,,,,],[,,,,,,,,,,],[1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],s=t/2-12*h[0].length/2;this.ba(ctx_mobile_gira,s,200,h,12)},this.Ob=function(){document.getElementById("canvas_mobile_gira").style.display="none",i=document.getElementById("canvas_mobile"),h=i.getContext("2d"),i.style.display="block";var t=window.innerWidth;i.width=this.A,i.height=100;var s=[[,1,,],[,1,1],[1,1,1,1],[,1,1],[,1,,]],a=[[,,1],[,1,1],[1,1,1,1],[,1,1],[,,1]],e=[[,,1,,],[,1,1,1],[1,1,1,1,1],[,1,1,1],[,1,1,1]],n=[[1,,1,,1],[,1,1,1],[1,1,1,1,1],[,1,1,1],[1,,1,,1]];this.ba(h,20,20,a,12),this.ba(h,120,20,s,12),this.ba(h,t-180,20,e,12),this.ba(h,t-80,20,n,12),document.getElementById("controles_mobile").style.display="block";var r=this;document.getElementById("der_mobile").addEventListener("touchstart",function(t){r.M.right=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("izq_mobile").addEventListener("touchstart",function(t){r.M.left=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("arr_mobile").addEventListener("touchstart",function(t){r.M.jump=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("accion_mobile").addEventListener("touchstart",function(t){r.M.accion=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("lost").addEventListener("touchmove",function(t){var i=document.elementFromPoint(t.touches[0].pageX,t.touches[0].pageY);t.preventDefault(),"der_mobile"===i.id?(r.M.right=!0,document.getElementById("der_mobile").className="tecla_mobile pulsada"):(r.M.right=!1,document.getElementById("der_mobile").className="tecla_mobile"),"izq_mobile"===i.id?(r.M.left=!0,document.getElementById("izq_mobile").className="tecla_mobile pulsada"):(r.M.left=!1,document.getElementById("izq_mobile").className="tecla_mobile")}),document.getElementById("der_mobile").addEventListener("touchend",function(t){r.M.right=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("izq_mobile").addEventListener("touchend",function(t){r.M.left=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("arr_mobile").addEventListener("touchend",function(t){r.M.jump=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("accion_mobile").addEventListener("touchend",function(t){r.M.accion=!1,this.className="tecla_mobile",t.preventDefault()})};var i,h,s=this;this.Pb=function(){this.$a()&&(window.innerHeight>window.innerWidth?(s.Nb(),s.Fa=!0):(s.Ob(),s.Fa=!1),window.addEventListener("orientationchange",function(t){window.setTimeout(function(){window.innerHeight>window.innerWidth?(s.Nb(),juego.Fa=!0):(s.Ob(),s.Fa=!1)},300)}))}};!function(){function t(){if(h.Fa)return void requestAnimationFrame(t,canvas);if(!h.Ea)return h.counter++,h.ctx.clearRect(0,0,h.A,h.O),h.Fb(h.ctx),h.Lb(h.ctx,a),void requestAnimationFrame(t,canvas);for(s=h.u(),a+=Math.min(1,(s-e)/1e3);a>h.Ra;)a-=h.Ra,h.Qb||h.la(h.Ra);h.wb(),h.lb(h.ctx,h.counter,a),h.yb(),e=s,h.counter++,requestAnimationFrame(t,canvas)}function i(){document.hidden?h.Fa=!0:(h.Fa=!1,h.Pb())}var h=new u;h.Pb(),h.counter=0;var s,a=0,e=h.u();h.u();document.addEventListener("keydown",function(t){return h._a(t,t.keyCode,!0)},!1),document.addEventListener("keyup",function(t){return h._a(t,t.keyCode,!1)},!1),document.addEventListener("visibilitychange",i,!1);var c=new d,f=!1;c.init(n);var m=new d;m.init(r);var y=!1;window.golpe_audio;var x=new d;x.init(l);var b=!1;window.disparo_audio,window.disparo_audio2;var M=new d;M.init(o);var v=!1;window.levelup_audio2;var g=!1;t();var _=setInterval(function(){if(g)return h.Pb(),void clearInterval(_);if(!f){var t=c.generate();h.music_percent=t,t>=1&&(f=!0)}if(y||m.generate()>=1&&(y=!0),v||M.generate()>=1&&(v=!0),b||x.generate()>=1&&(b=!0),g=f&&b&&y){var i=c.createWave();window.audio=document.createElement("audio"),window.audio.src=URL.createObjectURL(new Blob([i],{type:"audio/wav"})),window.audio.loop=!0,window.audio.volume=.3;var s=m.createWave();window.golpe_audio=document.createElement("audio"),window.golpe_audio.src=URL.createObjectURL(new Blob([s],{type:"audio/wav"})),window.golpe_audio.volume=.5;var a=M.createWave();window.levelup_audio2=document.createElement("audio"),window.levelup_audio2.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"})),window.levelup_audio2.volume=.2;var e=x.createWave();window.disparo_audio2=document.createElement("audio"),window.disparo_audio=document.createElement("audio"),window.disparo_audio.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),window.disparo_audio.volume=.6,window.disparo_audio2.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),window.disparo_audio2.volume=.5}},50)}();</script></body></html>