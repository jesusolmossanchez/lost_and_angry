var t=function(t,h,s,a,e){this.a=[],this.d=25,s&&(this.d=this.d/100),a&&(this.d=5*this.d);for(var o=0;o<this.d;o++)this.a.push(new i(t,h,s,a,e))},i=function(t,i,h,s,a){this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.h=3,this.j=15,this.k=2,this.l=15,s&&(this.h=3,this.j=30,this.k=2,this.l=1500),this.r=this.e(0,155),this.g="0",this.b=this.e(0,55),h&&(this.r=this.e(0,255),this.g="0",this.b="0"),s&&(this.r=this.e(0,255),this.g=this.e(0,255),this.b=this.e(0,255)),this.x=t,this.y=i,this.xv=this.e(this.h,this.j),this.yv=this.e(this.h/2,this.j/2),this.xv>0?this.max_x=t+100*Math.random():this.max_x=t-100*Math.random(),this.yv>0?this.max_y=i+100*Math.random():this.max_y=i-100*Math.random(),this.opacidad=Math.random(),this.size=this.e(this.k,this.l)},h=function(t,i,h,s,a,e,o){this.x=t,this.y=i+o.m/2;var r=1,n=this.x+o.o+15;a||(r=-1,n=this.x-o.o+15),this.x=n,this.size=1,this.xv=35*r+h,this.yv=7*(Math.random()-.5)+s},s=function(t,i,h,s,a,e){this.x=t-e.o/4;var o=Math.floor(e.m/3);this.y=i+e.m/1.7+a.e(-o,o),this.size=1;this.angulo=90,this.xv=-1*(.5+Math.random())*5+h,this.yv=7*(Math.random()-.5)+s},a=function(i,h,s,a){this.que_pie=0,this.angulo=0,this.size_enemigo_pixel=4,this.x=h,this.y=s,this.m=12*this.size_enemigo_pixel,this.o=6*this.size_enemigo_pixel+5,this.dx=0,this.dy=0,this.friction=7e12,this.accel=500,this.shoot_back=1500,this.q=3e4,this.last_left=!1,this.s=800,this.t=i.u(),this.v=140,this.w=500,this.z=i.A+this.o,this.B=-this.o,this.C=0,this.D=Math.random()>.5,this.F=i.u(),this.muriendo=i.u(),this.G=a,this.H=[],this.I=[],this.H[0]=[[,,,1,1,1],[,,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,,1,1,,,],[1,,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,,,,,,]],this.I[0]=[[,,,1,1,1],[,,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,,1,1,,,],[1,,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[0].length;e++)this.I[0][e].reverse();this.H[1]=[[1,,,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,,,],[,,1,1,,,],[1,,1,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,,]],this.I[1]=[[1,,,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,,,],[,,1,1,,,],[1,,1,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,,]];for(var e=0;e<this.I[1].length;e++)this.I[1][e].reverse();this.H[2]=[[1,,,,1,1],[1,1,,,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,1,1],[1,,1,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,1,,],[,,,,,,]],this.I[2]=[[1,,,,1,1],[1,1,,,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,1,1],[1,,1,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[2].length;e++)this.I[2][e].reverse();this.H[3]=[[1,1,1,,,,],[1,1,1,1,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,,1,1,,],[,1,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.I[3]=[[1,1,1,,,,],[1,1,1,1,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,,1,1,,],[,1,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[3].length;e++)this.I[3][e].reverse();this.H[4]=[[,1,,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,,],[1,1,,1,1,1],[1,,,1,1,1],[,,,1,1,1],[,,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.I[4]=[[,1,,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,,],[1,1,,1,1,1],[1,,,1,1,1],[,,,1,1,1],[,,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]];for(var e=0;e<this.I[4].length;e++)this.I[4][e].reverse();this.J=this.H[this.G],this.K=this.I[this.G],this.update=function(t){if(!(i.M.L>i.u()||i.N>i.u())){var h=0,s=0;if(h=Math.abs(this.x-i.M.O),s=Math.abs(this.y-i.M.P),!(Math.sqrt(h*h+s*s)>i.Q/2)){s<60&&h<i.A/2?(this.rapido=!0,i.M.x<this.x?this.D=!0:this.D=!1):this.rapido=!1,this.O=this.x+this.o/2,this.P=this.y+this.m/2,this.wasleft=this.dx<0,this.wasright=this.dx>0;var a=this.friction*(this.falling?.2:1),e=this.accel;this.ddx=0,this.ddy=this.s;var o=!1;if(this.R()&&!this.muerto&&(o=!0,i.M.S--,window.golpe_audio.play()),!this.muerto&&!o){var r=Math.random()>.9,n=Math.random()>.9;if(this.T()&&!this.jumping){var l=Math.random(),d=l<.1;l>.8?this.jump=!0:this.U()&&r?this.jump=!0:d?(this.F=i.u()+1e3,this.jump=!1):this.jump=!1}else this.V()&&n?this.jump=!0:this.U()&&r?this.jump=!0:this.jump=!1;this.D&&i.u()>this.F?(this.ddx=this.ddx-e,this.last_left=!0):this.wasleft&&(this.ddx=this.ddx+a),!this.D&&i.u()>this.F?(this.ddx=this.ddx+e,this.last_left=!1):this.wasright&&(this.ddx=this.ddx-a),this.jump&&!this.jumping&&this.t<i.u()&&(this.ddy=this.ddy-this.q,this.jumping=!0,this.falling=!0,this.t=i.u()+1e3),this.accion&&(i.counter,this.C)}this.x=this.x+t*this.dx,this.y=this.y+t*this.dy;var u=this.v;this.ddx;this.rapido||this.jumping||(u=.5*this.v,.5*this.ddx),this.muerto||o?(this.dx=0,this.dy=i.W(this.dy+t*this.ddy,-this.w,this.w)):(this.dx=i.W(this.dx+t*this.ddx,-u,u),this.dy=i.W(this.dy+t*this.ddy,-this.w,this.w)),(this.wasleft&&this.dx>0||this.wasright&&this.dx<0)&&(this.dx=0);for(var f=(this.y+this.m)%i.Z.Y,c=this.y%i.Z.Y,m=!1,y=this.x+5;y<=this.x+this.o-5;y++)i.$(y,this.y-2)&&(m=!0);for(var x=!1,b=this.x+5;b<=this.x+this.o-5;b++)i.$(b,this.y+this.m)&&(x=!0);for(var v=!1,M=this.y+5;M<=this.y+this.m-5;M++)i.$(this.x-6,M)&&(v=!0);for(var g=!1,p=this.y+5;p<=this.y+this.m-5;p++)i.$(this.x+this.o+2,p)&&(g=!0);this.dy>=0?(this.y+this.m>i.Q&&(this.y=i.Q-this.m,this.dy=0,this.jumping=!1,this.falling=!1),x&&(this.dy=0,this.jumping=!1,this.falling=!1,f&&(this.y=20*Math.floor((this.y+this.m)/20)-this.m))):this.dy<0&&m&&c&&(this.dy=0),this.dx>0?this.x+this.o>=this.z?(this.x=10,this.dx=-this.dx):g&&(this.dx=0,this.D=!this.D):this.dx<0&&(this.x<=this.B?(this.x=i.A-this.o,this.dx=-this.dx):v&&(this.dx=0,this.D=!this.D))}}},this._=function(h,s,a){var e=this.x+this.dx*h,o=this.y+this.dy*h;i.M.x,i.M.dx,i.M.y,i.M.dy;if(this.R()&&!this.muerto){i.M.aa=i.u()+2e3;var r=this.x+this.o/2,n=this.y+this.m/2;i.ba.push(new t(r,n,!0))}var l=[[,,1,,,,1,1,,,],[,1,1,1,1,1,1,1,1,1,1],[,,1,1,1,1,1,1,1,1,1],[,,,1,,,,,,,],[,,,1,,,,,,,],[,,1,1,,,,,,,]],d=[[,,,1,1,,,,1,,],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,,],[,,,,,,,1,,,],[,,,,,,,1,,,],[,,,,,,,1,1,,]],u=[];u[0]=[[,1,,,1,,]],u[1]=[[,,1,,1,,]],this.muerto?this.muriendo>i.u()?this.last_left?this.angulo=this.angulo+1:this.angulo=this.angulo-1:this.last_left?this.angulo=90:this.angulo=-90:this.jumping?(this.que_pie=1,this.angulo=0):Math.abs(this.dx)>0?i.ca(a,40)<.5?(this.que_pie=0,this.angulo=-2):(this.que_pie=1,this.angulo=2):this.angulo=0,s.save(),s.translate(e,o),s.rotate(this.angulo*Math.PI/180);var f=this.J,c=0,m=0;this.last_left&&(f=this.K,d,this.o);var y=0,x=0,b=0;x=Math.abs(this.x-i.M.O),b=Math.abs(this.y-i.M.P),y=Math.sqrt(x*x+b*b);var v=1-y/250,M="rgba(255, 153, 153, "+v+")";if(this.muerto)if(this.muriendo>i.u()){var g=this.muriendo-i.u();g=(410-g)/3,M="rgba(255, 255, 255, 1)";var p=10*(Math.random()-.5),_=10*(Math.random()-.5),w=10*(Math.random()-.5),P=Math.random()*g+this.m/2,S=Math.random()*g+this.m/2,I=Math.random()*g+this.m/2,j=Math.floor(155*Math.random())+100;s.beginPath(),s.fillStyle="rgba(155,155,"+j+",0.1)",s.arc(p,_,P,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+j+",0.2)",s.arc(_,w,S,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+j+",0.3)",s.arc(w,p,I,2*Math.PI,0,!1),s.closePath(),s.fill(),c=0,m=0}else this.last_left?(d,c=-50,m=20,M="rgba(200, 193, 255, "+v/4+")"):(l,c=-30,m=-50,M="rgba(200, 193, 255, "+v/4+")");i.da(s,m,c,f,this.size_enemigo_pixel,M),this.muerto||i.da(s,0,this.m-this.size_enemigo_pixel,u[this.que_pie],this.size_enemigo_pixel,M),s.restore()},this.ea=function(){for(var t=this.x;t<this.x+this.o;t++)for(var h=this.y-5;h<this.y+this.m;h++)if(i.$(t,h))return!0;return!1},this.fa=function(){this.x=i.e(200,i.A-200),this.y=i.e(0,i.Q/2)},this.T=function(){var t=!1;return this.y+this.m>i.Q-15?t=!1:this.last_left?!i.$(this.x-5,this.y+this.m+15)&&i.$(this.x,this.y+this.m+15)&&(t=!0):!i.$(this.x+this.o+5,this.y+this.m+15)&&i.$(this.x+this.o,this.y+this.m+15)&&(t=!0),t},this.U=function(){var t=!1;if(this.last_left)for(var h=this.y-2*this.m;h<=this.y+this.m/2;h++)i.$(this.x+this.o+20,h)&&!i.$(this.x+this.o,h)&&(t=!0);else for(var h=this.y-2*this.m;h<=this.y+this.m/2;h++)i.$(this.x-20,h)&&!i.$(this.x,h)&&(t=!0);return t},this.V=function(){var t=!1,h=!1,s=!1;if(this.last_left)for(var a=this.y-this.m;a<=this.y+this.m-5;a++)i.$(this.x-5,a)&&(h=!0),i.$(this.x-5,a)||(t=!0);else for(var e=this.y-this.m;e<=this.y+this.m-5;e++)i.$(this.x+this.o+5,e)&&(s=!0),i.$(this.x+this.o+5,e)||(t=!0);return t&&(h||s)},this.R=function(){return i.ga(this.x,this.y,this.o,this.m,i.M.x,i.M.y,i.M.o,i.M.m)}},e=function(t,i,s,a,e,o){this.que_pie=0,this.angulo=0,this.size_player_pixel=4,this.x=i,this.y=s,this.m=12*this.size_player_pixel,this.o=6*this.size_player_pixel+5,this.O=this.x+this.o/2,this.P=this.y+this.m/2,this.dx=0,this.dy=0,this.ha=850,this.ia=850,this.ja=2500,this.v=220,this.w=550,this.ka=!1,this.s=1e3,this.t=t.u(),this.aa=t.u(),this.q=4e4,this.z=t.A+this.o,this.B=-this.o,this.C=0,this.la=o,this.S=o,this.L=t.u(),this.ma=t.u(),this.na=function(i){if(this.S<0&&(this.jump=!0,t.oa(!1)),t.N>t.u())return t.pa.x=30,t.pa.y=t.Q-100,void(t.qa=!1);if(!t.qa){for(t.ra(t.pa);t.sa(t.pa);)t.ra(t.pa);t.qa=!0}if(!(this.L>t.u())){this.ma>t.u()&&(this.S=this.S+1,this.S>=t.la&&(this.S=this.la)),t.ta||this.ua()&&(t.va=!0,this.L=t.u()+3e3,window.levelup_audio2.play()),this.wa()&&this.ma<t.u()&&(this.ma=t.u()+2e3),this.O=this.x+this.o/2,this.P=this.y+this.m/2,this.wasleft=this.dx<0,this.wasright=this.dx>0;var s=this.ha*(this.falling?.2:1),a=this.ia;if(this.ddx=0,this.ddy=this.s,this.left?(this.ddx=this.ddx-a,this.ka=!0):this.wasleft&&(this.ddx=this.ddx+s),this.right?(this.ddx=this.ddx+a,this.ka=!1):this.wasright&&(this.ddx=this.ddx-s),this.jump&&!this.jumping&&this.t<t.u()&&(!t.xa||t.ya)&&(this.ddy=this.ddy-this.q,this.jumping=!0,this.falling=!0,this.t=t.u()+300),this.accion&&t.counter>this.C&&!t.xa){this.za(),this.C=t.counter+3,t.Aa=t.u()+20;var e=!0,o=this.ja;this.jumping&&(o/=2),this.ka?(e=!1,this.ddx=this.ddx+o):this.ddx=this.ddx-o;var r=this;setTimeout(function(){t.Ba.push(new h(r.x,r.y-10,-10,-3,e,t,r))},i/3),setTimeout(function(){t.Ba.push(new h(r.x,r.y+10,10,3,e,t,r))},2*i/3),t.Ba.push(new h(this.x,this.y,0,0,e,t,this))}var n=10*this.ja,l=this.ja;this.aa-t.u()>1900&&(this.ddx=this.ddx+n*(.5-Math.random()),this.ddy=this.ddy+l*(.5-Math.random())),t.xa&&(this.dx=50,this.ka=!1,t.ya&&(this.jump=!0,this.dx=80)),this.x=this.x+i*this.dx,this.y=this.y+i*this.dy,this.dx=t.W(this.dx+i*this.ddx,-this.v,this.v),this.dy=t.W(this.dy+i*this.ddy,-this.w,this.w),(this.wasleft&&this.dx>0||this.wasright&&this.dx<0)&&(this.dx=0);for(var d=(this.y+this.m)%t.Z.Y,u=this.y%t.Z.Y,f=!1,c=this.x+5;c<=this.x+this.o-5;c++)t.$(c,this.y-2)&&(f=!0);for(var m=!1,y=this.x+5;y<=this.x+this.o-5;y++)t.$(y,this.y+this.m)&&(m=!0);for(var x=!1,b=this.y+5;b<=this.y+this.m-5;b++)t.$(this.x-6,b)&&(x=!0);for(var v=!1,M=this.y+5;M<=this.y+this.m-5;M++)t.$(this.x+this.o+2,M)&&(v=!0);this.dy>=0?(this.y+this.m>t.Q&&(this.y=t.Q-this.m,this.dy=0,this.jumping=!1,this.falling=!1),m&&(this.dy=0,this.jumping=!1,this.falling=!1,d&&(this.y=20*Math.floor((this.y+this.m)/20)-this.m))):this.dy<0&&f&&u&&(this.dy=0),this.dx>0?(this.x+this.o>=this.z&&(this.x=10),v&&!t.xa&&(this.dx=0)):this.dx<0&&(this.x<=this.B&&(this.x=t.A-this.o,this.y=this.y-20),x&&(this.dx=0))}},this.Ca=function(i,h,s,a){t.N>t.u()&&(t.Da?this.Ea():this.Fa()),t.xa&&(t.ya?this.Ga():this.Ha());var e=this.x+this.dx*i,o=this.y+this.dy*i,r=[[,1,,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],n=[[,,,,1],[1,1,1,1,1],[1,1,1,1,1],[,,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],l=[[,,1,,,,1,1,,,],[,1,1,1,1,1,1,1,1,1,1],[,,1,1,1,1,1,1,1,1,1],[,,,1,,,,,,,],[,,,1,,,,,,,],[,,1,1,,,,,,,]],d=[[,,,1,1,,,,1,,],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,,],[,,,,,,,1,,,],[,,,,,,,1,,,],[,,,,,,,1,1,,]],u=[];u[0]=[[,,1,,,1]],u[1]=[[,,1,,1,,]],u[2]=[[1,,,1,,,]],u[3]=[[,1,,1,,,]];t.N>t.u()?(this.angulo*=-1.1,this.angulo+=-1,opacidad_jugador=300/(t.N-t.u()),opacidad_jugador>1&&(opacidad_jugador=1),this.angulo=1e3*(opacidad_jugador-1)):this.L>t.u()?(a?(a=-1*a*1.1,this.angulo=a+-1,h.globalAlpha-=.009):(this.angulo*=-1.1,this.angulo+=-1,h.globalAlpha-=.005),opacidad_jugador-=.01):(opacidad_jugador=1,this.jumping?(this.que_pie=1,this.angulo=0):this.left||this.right||t.xa?t.ca(s,30)<.5?(this.left?this.que_pie=2:this.que_pie=0,this.angulo=-2):this.left?(this.que_pie=3,this.angulo=2):(this.que_pie=1,this.angulo=2):this.angulo=0),h.save(),h.translate(e+this.o/2,o+this.m/2),radius=t.A/3,h.beginPath(),h.arc(0,0,300,0,2*Math.PI,!1);var f=h.createRadialGradient(0,0,.9*radius,this.o/2,this.m/2,0);if(this.aa-t.u()>1700){var c=Math.random()/2;f.addColorStop(0,"rgba(255, 11, 11, 0)"),f.addColorStop(1,"rgba(255, 11, 11, "+c+")")}else this.ma>t.u()?(f.addColorStop(0,"rgba(122, 255, 122, 0)"),f.addColorStop(1,"rgba(122, 255, 122, 0.2)")):t.xa||(f.addColorStop(0,"rgba(251, 255, 243, 0)"),f.addColorStop(1,"rgba(251, 255, 243, 0.6)"));h.fillStyle=f,h.fill(),h.rotate(this.angulo*Math.PI/180);var m=r,y=l,x=-5;this.ka&&(m=n,y=d,x=5-this.o),h.translate(-this.o/2,-this.m/2);var b="rgba(210,228,241,"+opacidad_jugador+")";t.da(h,0,0,m,this.size_player_pixel,b),t.da(h,0,this.m-this.size_player_pixel,u[this.que_pie],this.size_player_pixel,b),this.Ia=0;var v="rgba(143,172,192,"+opacidad_jugador+")";if(h.translate(this.o/2.5,this.m/2),h.rotate(this.angulo*Math.PI/180),t.xa||t.da(h,x,0,y,3,v),h.restore(),this.aa>t.u()||this.ma>t.u()){var M=this.aa;this.ma>this.aa&&(M=this.ma);var g=M-t.u(),p=g/2e3,_=2*this.o,w=this.S/t.la;h.fillStyle="rgba(11, 204, 0, "+p+")",w<.8&&(h.fillStyle="rgba(224, 239, 20, "+p+")"),w<.6&&(h.fillStyle="rgba(204, 199, 0, "+p+")"),w<.4&&(h.fillStyle="rgba(239, 92, 20, "+p+")"),w<.2&&(h.fillStyle="rgba(255, 0, 0, "+p+")"),h.fillRect(e-this.o/2,o-10,w*_,5),h.strokeStyle="rgba(255,255,255,"+p+")",h.lineWidth=1,h.strokeRect(e-this.o/2,o-10,_,5)}return this.angulo},this.za=function(){window.disparo_audio.play(),setTimeout(function(){window.disparo_audio2.play()},150*Math.random())},this.Fa=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,1,1,1,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,1,,1,1,,1,1,,,,,1,,,1,1,,,1],[1,,,1,1,1,1,,1,1,,1,,1,1,,1,,1,,1,1,1,1,,,1,1,,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,,,,1,,1,1,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-60;t.da(t.ctx,h,s,i,3,"#ffffff")},this.Ea=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,1,1,1,,1,1,,1,1,,1,,1,1,1,,1,1,,1,1,,1,1,,,1],[1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,,1,1,,1,1,,,1],[1,,,1,1,,,,1,,1,1,,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-60;t.da(t.ctx,h,s,i,3,"#ffffff")},this.Ga=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,1,1,1,1,,1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,,,1,1,1,1,,,1],[1,,,1,1,1,,1,1,,1,1,,1,,1,1,1,,1,1,,,1,1,,,,1,1,,,,1,1,,,,1,1,,,,1,1,,1,,1,1,,,,,1],[1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,,,1,1,1,1,,1,1,,,,1,1,1,,,1,1,1,,,1,1,,1,,1,1,1,1,,,1],[1,,,1,1,,,,1,,1,1,,1,,1,1,,,,1,,,1,1,1,1,,1,1,,,,1,1,1,,,1,1,1,,,1,1,1,,,1,1,1,1,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,,,,1,,1,1,,,,1,1,,,,1,1,,,,1,1,,,,,,,1,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,,,,1,1,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,,1,1,1,1,,1,1,1,1,,1,,1,1,1,1,,,,,1,1,1,,,1,1,,,,1,1,1,1,,1,,,1,,1,1,,1,1,,1],[1,,,1,1,,,,1,1,,,,,1,1,,,,,1,1,,,,,,,1,1,,1,,1,1,,,,1,1,,1,,,1,1,,,1,1,,1,1,,1],[1,,,1,1,,,,1,1,1,,,,1,1,,,,,1,1,1,1,,,,,1,1,,1,,1,1,,,,1,1,1,1,,,1,1,,,1,1,,1,1,,1],[1,,,1,1,,,,1,1,1,,,,1,1,,,,,1,1,1,1,,,,,1,1,1,,,1,1,,,,1,1,1,1,,,1,1,,,1,1,,1,1,,1],[1,,,1,1,,,,1,1,,,,,1,1,,,,,,,,1,,,,,1,1,,,,1,1,,,,1,1,,1,,,1,1,,,,,,,,,1],[1,,,1,1,1,1,,1,1,1,1,,,1,1,,,,,1,1,1,1,,,,,1,1,,,,1,1,1,1,,1,1,,1,,,1,1,,,1,1,,1,1,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-90;t.da(t.ctx,h,s,i,3,"#ffffff")},this.Ha=function(){var i=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,,1,1,,,1,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,,1,,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,,,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,,,,,,,,,,,,1],[1,,,1,1,1,1,,1,1,,1,1,,1,1,,1,1,,1,1,,,1],[1,,,1,1,1,1,,1,1,,,1,,1,1,,1,1,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,]],h=this.x+this.o+20,s=this.y-60;t.da(t.ctx,h,s,i,3,"#ffffff")},this.ua=function(){var i=t.pa.x+t.pa.o/3,h=t.pa.y+t.pa.o/3,s=t.pa.o/3,a=t.pa.o/3;return t.ga(this.x,this.y,this.o,this.m,i,h,s,a)},this.wa=function(){if(!t.ta){if(void 0===t.Ja.x)return!1;return t.ga(this.x,this.y,this.o,this.m,t.Ja.x,t.Ja.y,t.Ja.o,t.Ja.m)}}},o={songData:[{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[1,2,3,4,5,6,7,8,7,9],c:[{n:[122,120,122,110,,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,122,120,122,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,125,124,125],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,120,122,120,110,,110,,110,,,,125,124,125,,,125,124,125,,,,,129,127,129,117,,132,134,122],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,,110,117,116,115,113,119,118,117,116,120,122,120,110,,110,,110],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,117,116,119,118,117,116,115,114,113,112,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,117,116,119,118,121,120,123,124,126,127,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,,117,119,113,,,116,111,,,112,112,,112,124,,,124],f:[]},{n:[,124,124,,122,124,125,122,124,,112,,124,,,124,,124,112,,120,119,117,110,,,110,,,,110,110],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110,,112,,112,,124,,112,124],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110],f:[]}]},{i:[0,160,128,1,0,160,128,0,1,210,4,7,41,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],p:[1,2,3,4,5,6,7,8,7,9,10],c:[{n:[134,132,134,122,,122,,134,132,134,122,,134,132,134,122,,122,,134,132,134,122,,132,134,122,,134,132,134,122],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,118,,,,142,,,118],f:[]},{n:[,,118,,142,,,118,118,,,,142,,,118,,,,,142,118,,,118,,,,142,,,118],f:[]},{n:[118,,,,142,,,118,118,118,,,142,,118,,118,,,118,142,,,,118,118,,,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,,142,118,,,142,118,,,118,118,,118,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,118,142,118,,,142,118,,,118,118,,118,142,,,118],f:[]},{n:[,118,118,,142,,118,,118,,,,142,,118,,118,118,,,142,118,118,118,,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,,118,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,118,,,,,118],f:[]},{n:[118,,,,118,,,,154],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,2,1,1,1,1,1,1,1,1],c:[{n:[154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,154,,154,,154,,154],f:[]}]},{i:[0,255,128,0,0,154,128,9,0,0,7,5,52,0,0,0,61,0,0,2,255,0,0,32,47,3,163,4],p:[,2,3,4,5,6,7,8,9,10],c:[{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,156,,,155,,,153],f:[]},{n:[,,,,,,151,153,149,,,,,,,,151,,,,,,,,149,,,148,,,146],f:[]},{n:[,,,,,,144,146,143,,,,,,,,139,,,,137,,,,141,,,,,,140],f:[]},{n:[,,,,137,,,,,,140,137,136,,141,140,143,142,145,144,147,148,150,151,141,,,,,,140],f:[]},{n:[,,,,141,,143,,,,144,,,,146,,,,148,149,152,,,,148,,,146,,,144],f:[]},{n:[143,,,,,,141,143,144,,,,,146,144,143,,,,,,,,144,,,,,,,,143],f:[]},{n:[,,143,,,,141,,,,141,,,,,137,141,137,136,,,,,,153,,,149,,,148],f:[]},{n:[148,,,,,,146,148,149,,,,,153,149,148,,,,,,,,134,,,,,137,,,128],f:[]},{n:[,,,,137,,,127,,,,,137,,,125,,,,,124,,,123],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,131,7],p:[,,,,,,,,,1,2],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],f:[]},{n:[,,,,,,,,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,122],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:5513,patternLen:32,endPattern:12},r={songData:[{i:[2,0,128,1,2,68,128,0,1,55,4,4,40,105,4,1,125,4,1,3,67,115,124,190,67,6,39,1],p:[1],c:[{n:[111],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:827,patternLen:32,endPattern:2},n={songData:[{i:[1,192,128,1,1,191,116,9,1,0,68,32,34,204,4,0,69,3,1,1,23,167,0,32,121,14,25,6],p:[1],c:[{n:[147,,151,,,147,,,,151,,,,,,,159,,,,,,,,,,,,,,,,,,,,,151,,,,154,,,,,,,163,,,,,,,,,,,,,,,,,,,,,154,,,,,,,,,,,166,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,171],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:2e3,patternLen:32,endPattern:2},l={songData:[{i:[3,170,128,0,3,156,128,0,1,218,4,24,59,0,0,1,55,4,1,2,67,115,124,190,67,6,127,6],p:[1],c:[{n:[128],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:400,patternLen:32,endPattern:2},d=function(){var t,i,h,s,a,e=function(t){return Math.sin(6.283184*t)},o=function(t){return t%1*2-1},r=function(t){return t%1<.5?1:-1},n=function(t){var i=t%1*4;return i<2?i-1:3-i},l=function(t){return.003959503758*Math.pow(2,(t-128)/12)},d=function(t,i,h){var s,a,e,o,r,n,d,f=u[t.i[0]],c=t.i[1],m=t.i[3],y=u[t.i[4]],x=t.i[5],b=t.i[8],v=t.i[9],M=t.i[10]*t.i[10]*4,g=t.i[11]*t.i[11]*4,p=t.i[12]*t.i[12]*4,_=1/p,w=t.i[13],P=h*Math.pow(2,2-t.i[14]),S=new Int32Array(M+g+p),I=0,j=0;for(s=0,a=0;s<M+g+p;s++,a++)a>=0&&(w=w>>8|(255&w)<<4,a-=P,n=l(i+(15&w)+t.i[2]-128),d=l(i+(15&w)+t.i[6]-128)*(1+8e-4*t.i[7])),e=1,s<M?e=s/M:s>=M+g&&(e-=(s-M-g)*_),o=n,m&&(o*=e*e),I+=o,r=f(I)*c,o=d,b&&(o*=e*e),j+=o,r+=y(j)*x,v&&(r+=(2*Math.random()-1)*v),S[s]=80*r*e|0;return S},u=[e,r,o,n];this.init=function(e){t=e,i=e.endPattern-2,h=0,s=e.rowLen*e.patternLen*(i+1)*2,a=new Int32Array(s)},this.generate=function(){var o,r,n,l,f,c,m,y,x,b,v,M,g,p,_=new Int32Array(s),w=t.songData[h],P=t.rowLen,S=t.patternLen,I=0,j=0,E=!1,A=[];for(n=0;n<=i;++n)for(m=w.p[n],l=0;l<S;++l){var D=m?w.c[m-1].f[l]:0;D&&(w.i[D-1]=w.c[m-1].f[l+S]||0,D<15&&(A=[]));var L=u[w.i[15]],R=w.i[16]/512,$=Math.pow(2,w.i[17]-9)/P,k=w.i[18],N=w.i[19],q=43.23529*w.i[20]*3.141592/44100,B=1-w.i[21]/255,J=1e-5*w.i[22],z=w.i[23]/32,Q=w.i[24]/512,C=6.283184*Math.pow(2,w.i[25]-9)/P,Z=w.i[26]/255,O=w.i[27]*P;for(v=(n*S+l)*P,f=0;f<4;++f)if(c=m?w.c[m-1].n[l+f*S]:0){A[c]||(A[c]=d(w,c,P));var W=A[c];for(r=0,o=2*v;r<W.length;r++,o+=2)_[o]+=W[r]}for(r=0;r<P;r++)y=2*(v+r),b=_[y],b||E?(M=q,k&&(M*=L($*y)*R+.5),M=1.5*Math.sin(M),I+=M*j,g=B*(b-j)-I,j+=M*g,b=3==N?j:1==N?g:I,J&&(b*=J,b=b<1?b>-1?e(.25*b):-1:1,b/=J),b*=z,E=b*b>1e-5,x=Math.sin(C*y)*Q+.5,p=b*(1-x),b*=x):p=0,y>=O&&(p+=_[y-O+1]*Z,b+=_[y-O]*Z),_[y]=0|p,_[y+1]=0|b,a[y]+=0|p,a[y+1]+=0|b}return++h/8},this.createWave=function(){var t=2*s-8,i=t-36,h=new Uint8Array(44+2*s);h.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(var e=0,o=44;e<s;++e){var r=a[e];r=r<-32767?-32767:r>32767?32767:r,h[o++]=255&r,h[o++]=r>>8&255}return h},this.getData=function(t,i){for(var h=2*Math.floor(44100*t),s=new Array(i),e=0;e<2*i;e+=1){var o=h+e;s[e]=t>0&&o<a.length?a[o]/32768:0}return s}},u=function(){this.u=function(){return(new Date).getTime()},this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.Ka=function(t){var i=Math.floor(10*Math.random())+60;t&&(i*=3);var h=[],s=4,a=3,e=!1,o=0,r=0,n=15,l=42;t&&(l=25,n=1);for(var d=0;d<30;d++)for(var u=0;u<42;u++){var f=Math.random();if(u>l);else if(i>0&&d>=s&&u>=r&&f>.3||e){if(o<=a){h.push(1),e=!0,o++;continue}e=!1,o=0,i--,r=(u+5)%l,s=d+3}else!1,e=!1,o=0,a=Math.floor(Math.random()*n)+5;h.push(0)}var c=Math.floor(10*Math.random())+1;t&&(c*=3);for(var m=3,y=42,x=!1,b=0,u=41;u>=0;u--)for(var d=29;d>=0;d--){var f=Math.random(),v=u+42*d;if(c>0&&(u<y&&f>.4&&1===h[v]||x)){if(b<=m){h[v]=1,x=!0,b++;continue}x=!1,b=0,c--,y=u-(Math.floor(10*Math.random())+4)}else x=!1,b=0,m=Math.floor(5*Math.random())+2}for(var d=0;d<6;d++)for(var u=25;u<30;u++){var v=d+42*u;h[v]=0}return h},this.La=!1,this.Ma=!1,this.xa=!1,this.N=!1,this.Na=220,this.Oa&&(this.Na=2200),this.Z={},this.Z.datos,this.Z.Pa=20,this.Z.Y=42,this.Z.Qa=30,this.Ra=0,this.Sa=[],this.A=840,this.Q=600,this.Ta=840/this.Z.Pa,this.Ua=600/this.Z.Pa,this.Va=800,this.KEY={ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,X:88},this.Wa=60,this.fps_interval=1e3/this.Wa,this.Xa=1/60,this.Ya=document.getElementById("canvas"),this.ctx=this.Ya.getContext("2d"),this.Ya.width=this.A,this.Ya.height=this.Q,this.ba=[],this.Ba=[],this.Za=[],this.$a=this.u(),this.Aa=this.u(),this.va=!1,this._a=0,this.la=250,this.ab=this.la,this.bb=this.u(),this.cb=0,this.db=2500,this.eb=function(){return"ontouchstart"in document.documentElement},this.fb=function(t,i,h){switch(i){case this.KEY.LEFT:return t.preventDefault(),this.M.left=h,!1;case this.KEY.RIGHT:return t.preventDefault(),this.M.right=h,!1;case this.KEY.UP:return t.preventDefault(),this.M.jump=h,!1;case this.KEY.DOWN:return t.preventDefault(),this.M.down=h,!1;case this.KEY.ENTER:case this.KEY.X:return t.preventDefault(),this.M.accion=h,!1}},this.W=function(t,i,h){return Math.max(i,Math.min(h,t))},this.ga=function(t,i,h,s,a,e,o,r){return!(t+h-1<a||a+o-1<t||i+s-1<e||e+r-1<i)},this.gb=function(t,i,h,s,a){return(t-h)*(t-h)+(i-s)*(i-s)<=a*a},this.ca=function(t,i){var h=i/2,s=t%i;return s<h?s/h:1-(s-h)/h},this.hb=function(t,i){return this.Z.datos[t+i*this.Z.Y]},this.ib=function(t){return t*this.Z.Y},this.jb=function(t){return Math.floor(t/this.Z.Pa)},this.$=function(t,i){return this.hb(this.jb(t),this.jb(i))},this.kb=function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},this.da=function(t,i,h,s,a,e,o){if(t.fillStyle=e||"#ffffff",o)var r=this.kb(e);for(var n=i,l=h,d=0,u=0;u<s.length;u++){for(var f=s[u],c=0;c<f.length;c++)if(f[c])if(o){var m=0,y=0,x=0;y=Math.abs(n+c*a-this.M.O),x=Math.abs(l-this.M.P),m=Math.sqrt(y*y+x*x);var b=1-m/(2.5*this.Na);if(m>2.5*this.Na)continue;t.fillStyle="rgba("+r.r+","+r.g+","+r.b+","+b+")",t.fillRect(n+c*a,l,a,a)}else t.fillRect(n+c*a,l,1.1*a,1.1*a);d=Math.max(d,f.length*a),l+=a}n+=a+d},this.lb=function(t,i){this.Ra=0,this.Sa=[],this.ba=[],this.ta=t,this.Z.datos=this.Ka(this.ta),this.ctx.globalAlpha=1;var h=1500;if(i&&(h=i),this.N=this.u()+h,this.M=new e(this,40,this.Q-100,1e3,3e4,this.ab),this.ta)this.Da=new Boss(this,this.A/1.5,240,800,3e4,1);else{for(this.cb++,this.pa={},this.pa.o=this.M.m,this.pa.m=this.M.m,this.ra(this.pa);this.sa(this.pa);)this.ra(this.pa);if(this.Ja={},Math.random()>.7)for(this.Ja.o=this.M.m/2,this.Ja.m=this.M.m/2,this.mb(this.Ja);this.nb(this.Ja);)this.mb(this.Ja);var s=1+2*this.cb,o=5+2*this.cb;this.Ra=this.e(s,o);for(var r=this.e(0,4),n=0;n<this.Ra;n++){for(var l=this.e(200,this.A-200),d=this.e(0,this.Q/2),u=new a(this,l,d,r);u.ea();)u.fa();this.Sa.push(u)}}},this.sa=function(t){for(var i=t.x;i<t.x+t.o;i++)for(var h=t.y-5;h<t.y+t.m;h++)if(this.$(i,h))return!0;return!1},this.ra=function(t){t.x=this.e(this.M.o,this.A-this.M.o),t.y=this.e(0,this.Q/1.5)},this.nb=function(t){for(var i=t.x;i<t.x+t.o;i++)for(var h=t.y-5;h<t.y+t.m;h++)if(this.$(i,h))return!0;return!1},this.mb=function(t){t.x=this.e(this.M.o,this.A-this.M.o),t.y=this.e(0,this.Q/1.5)},this.ob=function(){},this.pb=function(){this.ya?game_over=[[1,1,,1,1,,1,1,1,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,,,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,1,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,,1,,1,,1,,1,1,,1,1,,1,1,,,,,,,,],[,1,1,1,,,1,1,1,1,,1,1,1,1,,,,,,1,,1,,,1,1,,1,1,,,1,,,1,,1,,1]]:game_over=[[1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,,,1,1,,1,,1,1,1,1,,1,1,,,,,,1,1,,1,,1,1,,1,,1,1,,,,1,1,,1],[1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,,,,,1,1,,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,1,,1,1,,1,,1,1,,1,,1,1,,,,,,1,1,,1,,,1,,1,,1,1,,,,1,1,1],[1,1,1,1,,1,1,,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,,,1,,,1,1,1,1,,1,1,,1]],
play_again=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,1,1,1,1,,1,1,,,,1,1,1,1,,1,,,1,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,,1,1,,,1,,1],[1,,1,1,,1,,1,1,,,,1,1,,1,,,1,1,,,,1,1,,1,,1,1,,,,1,1,,1,,1,1,,1,1,,,1,,1],[1,,1,1,1,1,,1,1,,,,1,1,1,1,,,1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,,1,1,1,,1,,1],[1,,1,1,,,,1,1,,,,1,1,,1,,,1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,1,1,,1,1,,1,1,,1],[1,,1,1,,,,1,1,1,1,,1,1,,1,,,1,1,,,,1,1,,1,,1,1,1,1,,1,1,,1,,1,1,,1,1,,,1,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],this.da(this.ctx,this.A/2-330,290,game_over,16,"rgba(255,255,255,1)"),this.da(this.ctx,this.A/2-130,400,play_again,6,"rgba(255,255,255,1)"),document.getElementById("play_again").style.display="block"},this.oa=function(i){var h=this;this.ba.push(new t(this.A/2,this.Q/2,!0,!0,i)),window.setTimeout(function(t){h.xa=!0,h.ya=i},2e3)},this.na=function(t){if(this.ab=this.M.S,this.qb(),this.va&&this.M.L<this.u()){this.va=!1,this.ctx.globalAlpha=1,this._a++;var i=!1;this._a>5&&Math.random()>.7&&(i=!0),this.lb(i)}if(this.M.na(t),this.ta)this.Da.na(t);else for(var h=0;h<this.Sa.length;h++)this.Sa[h].update(t)},this.qb=function(){this.bb<this.u()&&(this.Wa=60,this.fps_interval=1e3/this.Wa)},this.rb=function(t,i,h){if(t.clearRect(0,0,this.A,this.Q),this.xa)return this.Na=this.A,this.sb(t,h),this.tb(t,h),this.pb(t),void this.ub(t);this.ub(t),this.vb(t,h),this.sb(t,h),this.ta||(this.wb(t),this.xb(t)),this.yb(t,h,!0),this.zb(t),this.Ab(t),this.ta&&this.Bb(t),this.tb(t,h)},this.Cb=function(){if(this.Aa>this.u()){var t=4;this.$a>this.u()&&(t*=10),this.ctx.save(),this.dx_shacke||this.dy_shacke?(this.$a>this.u()&&(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.Da?this.Da.Db>this.u()&&(this.dx_shacke=(Math.random()-.5)*t*2,this.dy_shacke=(Math.random()-.5)*t*2):(this.dy_shacke=-.9*this.dy_shacke,this.dx_shacke=-.9*this.dx_shacke)):(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.ctx.translate(this.dx_shacke,this.dy_shacke)}else this.dx_shacke=0,this.dy_shacke=0},this.Eb=function(){this.ctx.restore()},this.yb=function(t,i,h){var s,a,e=0;this.M.P-this.Na>0&&(e=Math.floor((this.M.P-this.Na)/this.Z.Pa));var o=Math.floor(this.Q/this.Z.Pa);this.M.P+this.Na<this.Q&&(o=Math.floor((this.M.P+this.Na)/this.Z.Pa));var r=0;this.M.O-this.Na>0&&(r=Math.floor((this.M.O-this.Na)/this.Z.Pa));var n=Math.floor(this.A/this.Z.Pa);this.M.O+this.Na<this.A&&(n=Math.floor((this.M.O+this.Na)/this.Z.Pa));var l=0,d=0,u=0;for(a=e;a<=o;a++)for(s=r;s<=n;s++)this.hb(s,a)&&(d=Math.abs(s-Math.floor(this.M.O/this.Z.Pa)),u=Math.abs(a-Math.floor(this.M.P/this.Z.Pa)),l=Math.sqrt(d*d+u*u),opacidad=1/l*2.5,h||(opacidad/=2),t.fillStyle="rgba(250,250,250,"+opacidad+")",t.fillRect(s*this.Z.Pa,a*this.Z.Pa,this.Z.Pa,this.Z.Pa))},this.wb=function(t){radius=this.pa.o;var i=this.pa.x+this.pa.o/2,h=this.pa.y+this.pa.m/2,s=0,a=0;if(s=Math.abs(i-this.M.O),a=Math.abs(h-this.M.P),!(Math.sqrt(s*s+a*a)>this.Na)){var e=t.createRadialGradient(i,h,0,i,h,radius);t.fillStyle=e;for(var o=-2;o<2;o++){var r=i+(.5-Math.random())*o*15,n=h+(.5-Math.random())*o*15,l=this.e(110,255);t.beginPath(),t.arc(r,n,radius,0,2*Math.PI,!1),e.addColorStop(0,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0)"),e.addColorStop(.6,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0)"),e.addColorStop(.8,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0.2)"),e.addColorStop(1,"rgba("+Math.floor(l/1.2)+", "+l+", "+l+", 0.3)"),t.fill()}t.beginPath(),t.arc(i,h,1.2*radius,0,2*Math.PI,!1);var e=t.createRadialGradient(i,h,0,i,h,1.2*radius);e.addColorStop(0,"rgba(209,127,140, 0.2)"),e.addColorStop(.8,"rgba(209,127,140, 0.1)"),e.addColorStop(1,"rgba(209,127,140, 0)"),t.fillStyle=e,t.fill()}},this.xb=function(t){var i=0,h=0,s=0,a=this.Ja.x+this.Ja.o/2,e=this.Ja.y+this.Ja.m/2;h=Math.abs(a-this.M.O),s=Math.abs(e-this.M.P),i=Math.sqrt(h*h+s*s);var o=this.M.ma-this.u();if(!(o<0))return o/=1e3,void(o<.5?this.Ja={}:(t.strokeStyle="#ffffff",t.lineWidth=20*o+10,lejos_quitar=50*(1-o),t.strokeRect(this.Ja.x-lejos_quitar,this.Ja.y-lejos_quitar,this.Ja.m+2*lejos_quitar,this.Ja.m+2*lejos_quitar)));if(o=1,!(i>this.Na)){var r=this.ca(this.counter,80),n=this.ca(this.counter,60),l=5*r+2,d=10*n;t.fillStyle="rgba(255,110,110,"+((1-r)/2+.5*o/2)+")";var u=this.Ja.x,f=this.Ja.y+this.Ja.m/3;t.fillRect(u,f,this.Ja.o,this.Ja.m/3);var c=this.Ja.x+this.Ja.m/3,m=this.Ja.y;t.fillRect(c,m,this.Ja.o/3,this.Ja.m),t.strokeStyle="rgba(255,255,155,"+(r/7+.1*o/2)+")",t.lineWidth=8,t.strokeRect(this.Ja.x-l,this.Ja.y-l,this.Ja.m+2*l,this.Ja.m+2*l),t.strokeStyle="rgba(133,200,133,"+(r/7+.1*o/2)+")",t.lineWidth=15,t.strokeRect(this.Ja.x-d,this.Ja.y-d,this.Ja.m+2*d,this.Ja.m+2*d)}},this.Fb=0,this.Bb=function(i){if(this.Da.Db>this.u()){var h=this.Da.Db-this.u(),s=Math.floor(h/this.db*40);s=40-s;this.Fb=s%20,this.Fb>10&&(this.Fb=20-this.Fb);var a=9*this.Fb,e=this.A/40*2,o=this.A/40*s,r=i.createLinearGradient(0,this.Q-100,0,this.Q);r.addColorStop(0,"rgba(186,186,186,0.3)"),r.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=r;var n=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=o;if(i.fillRect(this.Da.x-o+l,this.Q-a+15+n,e,a+n),o=this.A/40*(s-2),alto_ola_n=.7*a+n,i.fillRect(this.Da.x-o+n,this.Q-alto_ola_n+15+l,e,alto_ola_n+l),o=this.A/40*(s-4),alto_ola_n=.4*a+l,i.fillRect(this.Da.x-o+10*(Math.random()-.5),this.Q-alto_ola_n+5,e,alto_ola_n),o=this.A/40*(s+2),alto_ola_n=.7*a+d,i.fillRect(this.Da.x-o+n,this.Q-alto_ola_n+15,e,alto_ola_n),o=this.A/40*(s+4),alto_ola_n=.4*a+l,i.fillRect(this.Da.x-o+d,this.Q-alto_ola_n+15,e,alto_ola_n),x_empieza_terremoto=this.Da.x-u+l,x_final_terremoto=this.Da.x-o+d,this.M.O<x_empieza_terremoto&&this.M.O>x_final_terremoto&&this.M.P>this.Q-100){this.M.S=this.M.S-5;for(var f=0;f<10;f++)this.ba.push(new t(this.M.O,this.M.P,!0));this.M.aa=this.u()+2200}}},this.tb=function(t,i){this.M.Ca(i,t,this.counter)},this.vb=function(t,i){for(var h=0,s=0,a=0;a<this.Sa.length;a++)h=Math.abs(this.Sa[a].x-this.M.O),s=Math.abs(this.Sa[a].y-this.M.P),distancia_jugador=Math.sqrt(h*h+s*s),distancia_jugador<this.Na&&this.Sa[a]._(i,t,this.counter)},this.sb=function(t,i){this.ta&&this.Da.Gb(i,t,this.counter)},this.ub=function(t){if(0!==this.ba.length)for(var i=0;i<this.ba.length;i++){var h=this.ba[i],s=h.a;if(0===s.length)return void this.ba.splice(i,1);for(var a=s.slice(),e=0;e<s.length;e++){var o=s[e],r=0,n=0,l=0;if(n=Math.abs(o.x-this.M.O),l=Math.abs(o.y-this.M.P),!((r=Math.sqrt(n*n+l*l))>300)){var d=(1-r/150)*o.opacidad,u=!1;o.xv>0?o.max_x-o.x<0&&(u=!0):o.x-o.max_x<0&&(u=!0),o.yv>0?o.max_y-o.y<0&&(u=!0):o.y-o.max_y<0&&(u=!0),u||(d*=20),t.beginPath(),t.arc(o.x,o.y,o.size,2*Math.PI,0,!1),t.fillStyle="rgba("+o.r+","+o.g+","+o.b+","+d+")",t.fill(),o.size<=2||u||(o.x+=o.xv,o.y+=o.yv,o.size-=.1)}}h.a=a}},this.zb=function(i){for(var h=0;h<this.Ba.length;h++){var s=this.Ba[h],a=8*s.size,e=0,o=0,r=0;if(o=Math.abs(s.x-this.M.O),r=Math.abs(s.y-this.M.P),(e=Math.sqrt(o*o+r*r))<1.2*this.Na){if(this.ta){if(this.ga(this.Da.x,this.Da.y,this.Da.o,this.Da.m,s.x-a/2,s.y-a/2,a,a)){var n=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),f=45*Math.random(),c=45*Math.random(),m=Math.floor(155*Math.random())+100;i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+n,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+l,s.y+d,f,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+d,s.y+n,c,2*Math.PI,0,!1),i.closePath(),i.fill(),this.Ba.splice(h,1),this.Da.Hb=this.u()+400;continue}}else for(var y=0;y<this.Ra;y++)if(!this.Sa[y].muerto&&this.u()>this.Sa[y].muriendo&&this.ga(this.Sa[y].x,this.Sa[y].y,this.Sa[y].o,this.Sa[y].m,s.x-a/2,s.y-a/2,a,a)){this.$a=this.u()+200;var n=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),f=45*Math.random(),c=45*Math.random(),m=Math.floor(155*Math.random())+100;i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+n,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+l,s.y+d,f,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",1)",i.arc(s.x+d,s.y+n,c,2*Math.PI,0,!1),i.closePath(),i.fill();var x=this.Sa[y].x+this.Sa[y].o/2,b=this.Sa[y].y+this.Sa[y].m/2;this.ba.push(new t(x,b,!1)),this.Ba.splice(h,1),this.Sa[y].muriendo=this.u()+400,this.Sa[y].muerto=!0}else;if(this.$(s.x,s.y)||this.$(s.x-5,s.y)||this.$(s.x+5,s.y)||this.$(s.x-10,s.y)||this.$(s.x+10,s.y)||this.$(s.x-15,s.y)||this.$(s.x+15,s.y)){var n=10*(Math.random()-.5),l=10*(Math.random()-.5),d=10*(Math.random()-.5),u=45*Math.random(),f=45*Math.random(),c=45*Math.random(),m=Math.floor(255*Math.random());i.beginPath(),i.fillStyle="rgba(255,"+m+",0,0.1)",i.arc(s.x+n,s.y+l,u,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",0.1)",i.arc(s.x+l,s.y+d,f,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(255,255,"+m+",0.1)",i.arc(s.x+d,s.y+n,c,2*Math.PI,0,!1),i.closePath(),i.fill(),this.Ba.splice(h,1);continue}1===s.size&&(i.beginPath(),i.fillStyle="rgba(255,255,255,0.4)",i.arc(s.x,s.y,5*a,2*Math.PI,0,!1),i.closePath(),i.fill());var v=1-e/(1.2*this.Na),M=1.14*a;i.beginPath();var g=1;s.xv<0&&(g=-1),i.fillStyle="rgba(255,255,0,"+v/24+")",i.arc(s.x,s.y,.8*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,20,"+v/20+")",i.arc(s.x+2*g,s.y,.85*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,40,"+v/16+")",i.arc(s.x+4*g,s.y,.9*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,60,"+v/12+")",i.arc(s.x+6*g,s.y,.92*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,80,"+v/8+")",i.arc(s.x+8*g,s.y,.94*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,100,"+v/4+")",i.arc(s.x+10*g,s.y,.96*M,2*Math.PI,0,!1),i.fillStyle="rgba(255,255,120,"+v+")",i.arc(s.x+12*g,s.y,.98*M,2*Math.PI,0,!1),i.closePath(),i.fill(),i.beginPath(),i.fillStyle="rgba(250,250,250,"+v/2+")",i.arc(s.x+12*g,s.y,M,2*Math.PI,0,!1),i.arc(s.x+14*g,s.y,M,2*Math.PI,0,!1),i.closePath(),i.fill()}s.x>this.A||s.x<0?this.Ba.splice(h,1):(s.x+=s.xv,s.y+=s.yv,s.size-=.004)}},this.Ab=function(i){for(var h=0;h<this.Za.length;h++){var s=this.Za[h],a=100*s.size;s.xv<0&&-1;var e=!0;if(s.Ib>this.u()){var o=10*(Math.random()-.5),r=10*(Math.random()-.5),n=(Math.random(),80*Math.random());if(this.gb(this.M.O,this.M.P,s.x,s.y,n)&&!s.Jb){this.M.S-=5;for(var h=0;h<10;h++)this.ba.push(new t(this.M.O,this.M.P,!0));this.M.aa=this.u()+2e3}var l=Math.floor(255*Math.random());i.beginPath(),i.fillStyle="rgba(0,0,"+l+",0,0.1)",i.arc(s.x+o+a/2,s.y+r+a/2,n,2*Math.PI,0,!1),i.closePath(),i.fill(),e=!1}else s.Kb&&(s.Jb=!0);if(s.Jb)this.Za.splice(h,1);else{(this.$(s.x,s.y)||this.$(s.x-5,s.y)||this.$(s.x-10,s.y)||this.$(s.x,s.y-5)||this.$(s.x,s.y-10)||this.$(s.x,s.y+5)||this.$(s.x,s.y+10)||this.$(s.x,s.y+20)||this.$(s.x,s.y+30)||this.$(s.x,s.y+40)||this.$(s.x,s.y+50)||this.ga(this.M.x,this.M.y,this.M.o,this.M.m,s.x-a/2,s.y-a/2,a,a))&&!s.Kb&&(s.Ib=this.u()+500,s.Kb=!0);var d=[[,,,,,,,],[,,,,,,,],[,,,1,1,,,],[,1,1,1,1,,,],[1,1,1,1,1,,,],[1,1,1,1,1,1,1,1],[,,,,,,,],[,,,,,,,]];i.beginPath(),i.fillStyle="rgba(250,0,0,0.01)",i.arc(s.x,s.y,a,2*Math.PI,0,!1),i.closePath(),i.fill();var u=s.x+8*d[0].length/2,f=s.y+8*d[0].length/2;s.x,d[0].length,s.y,d[0].length;i.save(),i.translate(u,f),i.rotate(s.angulo*Math.PI/180);var c=-8*d[0].length/2;i.arc(0,0,70,0,2*Math.PI,!1);var m=i.createRadialGradient(0,0,70,0,0,0);m.addColorStop(0,"rgba(151, 110, 143, 0)"),m.addColorStop(1,"rgba(151, 110, 143, 0.6)"),i.fillStyle=m,i.fill();var y="rgba(251, 110, 143, 0.7)";if(!e){y="rgba(251, 110, 143, "+(s.Ib-this.u())/2500+")"}this.da(i,c,c,d,8,y),i.restore(),s.x>this.A||s.x<0?this.Za.splice(h,1):e&&(s.x+=s.xv,s.y+=s.yv,s.angulo+=s.xv)}}},this.Lb=function(t){var i=[[1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,,,1,1,1,1,,1,1,,,1,,1,1,1,,,,,1,1,1,1,,1,1,,,1,,1,1,1,1,,,1,1,1,1,,,1,1,,,1,1],[1,1,,,,1,1,,1,,1,1,,,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,,1,,,,1,1,,1,,1,1,,,1,,1,1,,,,,1,1,,1,,,,1,1,1,1,,],[1,1,,,,1,1,,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,1,,1,,1,1,,1,,,,1,1,,1,,1,1,1,,1,,1,1,,1,1,,1,1,1,,,,,,1,1,,,],[1,1,,,,1,1,,1,,,,1,1,,,1,1,,,,,1,1,1,1,,1,1,,1,1,,1,1,,1,,,,1,1,1,1,,1,1,,1,1,,1,1,,,1,,1,1,,1,,,,,1,1,,,],[1,1,1,1,,1,1,1,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,1,1,,1,1,,,1,,,,1,1,,,]],h=this.A/2-8*i[0].length/2,s=[[1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,,,1,1,,1,1,,,1,,1,1,1,1,,,,,,,,,],[1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,,,,1,1,,,1,,1,1,,,,,,,,,,,],[1,1,,,,1,1,,1,,1,1,1,1,,1,1,,1,,1,1,,1,1,1,,1,,1,1,,1,1,,,,,,,,],[1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,1,1,,1,1,,1,1,,1,1,,,1,,,,,,,,],[1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,1,,,1,1,,1,1,,,1,,1,1,1,1,1,,1,,1,,1,,]],a=this.A/2-4*s[0].length/2;this.da(t,h,180,i,8);var e=this.ca(this.counter,60),o="rgba(255,255,255,"+e+")";if(this.da(t,a,260,s,4,o),!this.eb()){var r=[[1,1,1,1,,1,1,1,1,,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,,1,1,1,1,,,1,1,1,1,,1,1,1,1,,,1,1,,,,1,,1,1,1,1,,1,1,,1,,1,1,1,1,,,,,,,1,,,,1,,,1,1,1,1,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1,,1,1,1,1],[1,1,,1,,1,1,,1,,,1,1,,1,,,1,1,,1,,1,1,,1,,1,,1,1,,,,,,1,1,,,1,1,,1,,,1,1,1,,1,1,,1,1,,1,,1,1,,1,,1,1,,,,,,,,,,1,,1,,,,,1,1,,,1,1,,1,,,1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,,1,,1,1,1,1,,,1,1,1,1,,,1,1,,1,,1,1,,1,,1,,1,1,1,1,,,,1,1,,,1,1,,1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,1,1,,,,1,1,,,,,1,,,,,,1,1,,,1,1,,1,,,1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,1,1,,1,1,,1,,,1,1,,1,,,1,1,,1,,,1,1,1,1,,,,,,1,,,,1,1,,,1,1,,1,,,1,1,,,,1,,1,1,,1,,,1,,1,,1,1,,,,,,,,,,1,,1,,,,,1,1,,,1,1,,1,,,,,,1,,1,1,,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,,1,,1,1,,,1,,1,1,,,1,,1,1,1,1,,,,1,1,,,,1,1,1,1,,,,1,1,,,1,1,1,1,,,1,1,,,,1,,1,1,1,1,,,,1,,,1,1,1,1,,,,,,,1,,,,1,,,,1,1,,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1,,,1,1]],n=this.A/2-2.5*r[0].length/2;this.da(t,n,550,r,2.5)}},this.Mb=function(t,i){i.fillRect((this.A-200)/2,this.Q/2-50,200*t,80),i.strokeStyle="#ffffff",i.lineWidth=10,i.strokeRect((this.A-200)/2,this.Q/2-50,195,80)},this.Nb=0,this.Ob=this.u()+5e3,this.Pb=this.u(),this.Qb=!1,this.Rb=function(t,i){if(this.Pb<this.u()&&this.Qb)return this.lb(!1,1800),this.ob(),window.audio.play(),void(this.La=!0);this.Qb||(this.Sb=this.A/2-200+2*this.counter),this.M=new e(this,this.Sb,this.Q/2+100,1e3,3e4,this.ab),this.pa={},this.pa.o=this.M.m,this.pa.m=this.M.m,this.pa.x=this.A/2+150,this.pa.y=this.Q/2+100,this.M.right=!0,this.M.x>=this.pa.x+10&&!this.Qb&&(this.Qb=!0,this.Pb=this.u()+3e3),this.M.x>=this.pa.x+10&&(this.M.L=this.u()+3e3),this.wb(t),this.M.Fa(),this.Nb=this.M.Ca(i,t,this.counter,this.Nb)},this.Tb=function(){document.getElementById("controles_mobile").style.display="none",document.getElementById("canvas_mobile").style.display="none";var t=window.innerWidth,i=window.innerHeight;canvas_mobile_gira=document.getElementById("canvas_mobile_gira"),canvas_mobile_gira.style.display="block",ctx_mobile_gira=canvas_mobile_gira.getContext("2d"),canvas_mobile_gira.width=t,canvas_mobile_gira.height=i;var h=[[,,,1,1,1,1,,,,],[,,1,,,,,1,,,],[,1,,,,,,,1,,1],[,1,,,,,,,,1,1],[1,1,1,,,,,,1,1,1],[,,,,,,,,,,],[,,,,,,,,,,],[1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],s=t/2-12*h[0].length/2;this.da(ctx_mobile_gira,s,200,h,12)},this.Ub=function(){document.getElementById("canvas_mobile_gira").style.display="none",i=document.getElementById("canvas_mobile"),h=i.getContext("2d"),i.style.display="block";var t=window.innerWidth;i.width=this.A,i.height=100;var s=[[,1,,],[,1,1],[1,1,1,1],[,1,1],[,1,,]],a=[[,,1],[,1,1],[1,1,1,1],[,1,1],[,,1]],e=[[,,1,,],[,1,1,1],[1,1,1,1,1],[,1,1,1],[,1,1,1]],o=[[1,,1,,1],[,1,1,1],[1,1,1,1,1],[,1,1,1],[1,,1,,1]];this.da(h,20,20,a,12),this.da(h,120,20,s,12),this.da(h,t-180,20,e,12),this.da(h,t-80,20,o,12),document.getElementById("controles_mobile").style.display="block";var r=this;document.getElementById("der_mobile").addEventListener("touchstart",function(t){r.M.right=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("izq_mobile").addEventListener("touchstart",function(t){r.M.left=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("arr_mobile").addEventListener("touchstart",function(t){r.M.jump=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("accion_mobile").addEventListener("touchstart",function(t){r.M.accion=!0,this.className="tecla_mobile pulsada",t.preventDefault()}),document.getElementById("lost").addEventListener("touchmove",function(t){var i=document.elementFromPoint(t.touches[0].pageX,t.touches[0].pageY);t.preventDefault(),"der_mobile"===i.id?(r.M.right=!0,document.getElementById("der_mobile").className="tecla_mobile pulsada"):(r.M.right=!1,document.getElementById("der_mobile").className="tecla_mobile"),"izq_mobile"===i.id?(r.M.left=!0,document.getElementById("izq_mobile").className="tecla_mobile pulsada"):(r.M.left=!1,document.getElementById("izq_mobile").className="tecla_mobile")}),document.getElementById("der_mobile").addEventListener("touchend",function(t){r.M.right=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("izq_mobile").addEventListener("touchend",function(t){r.M.left=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("arr_mobile").addEventListener("touchend",function(t){r.M.jump=!1,this.className="tecla_mobile",t.preventDefault()}),document.getElementById("accion_mobile").addEventListener("touchend",function(t){r.M.accion=!1,this.className="tecla_mobile",t.preventDefault()})};var i,h,s=this;this.Vb=function(){this.eb()&&(window.innerHeight>window.innerWidth?(s.Tb(),s.Ma=!0):(s.Ub(),s.Ma=!1),window.addEventListener("orientationchange",function(t){window.setTimeout(function(){window.innerHeight>window.innerWidth?(s.Tb(),juego.Ma=!0):(s.Ub(),s.Ma=!1)},300)}))}};!function(){function t(){if(h.Ma)return void requestAnimationFrame(t,canvas);if(!h.La)return h.counter++,h.ctx.clearRect(0,0,h.A,h.Q),h.Lb(h.ctx),h.Rb(h.ctx,a),void requestAnimationFrame(t,canvas);for(s=h.u(),a+=Math.min(1,(s-e)/1e3);a>h.Xa;)a-=h.Xa,h.Wb||h.na(h.Xa);h.Cb(),h.rb(h.ctx,h.counter,a),h.Eb(),e=s,h.counter++,requestAnimationFrame(t,canvas)}function i(){document.hidden?h.Ma=!0:(h.Ma=!1,h.Vb())}var h=new u;h.Vb(),h.counter=0;var s,a=0,e=h.u();h.u();document.addEventListener("keydown",function(t){return h.fb(t,t.keyCode,!0)},!1),document.addEventListener("keyup",function(t){return h.fb(t,t.keyCode,!1)},!1),document.addEventListener("visibilitychange",i,!1);var f=new d,c=!1;f.init(o);var m=new d;m.init(r);var y=!1;window.golpe_audio;var x=new d;x.init(l);var b=!1;window.disparo_audio,window.disparo_audio2;var v=new d;v.init(n);var M=!1;window.levelup_audio2;var g=!1;t();var p=setInterval(function(){if(g)return h.Vb(),void clearInterval(p);if(!c){var t=f.generate();h.music_percent=t,t>=1&&(c=!0)}if(y||m.generate()>=1&&(y=!0),M||v.generate()>=1&&(M=!0),b||x.generate()>=1&&(b=!0),g=c&&b&&y){var i=f.createWave();window.audio=document.createElement("audio"),window.audio.src=URL.createObjectURL(new Blob([i],{type:"audio/wav"})),window.audio.loop=!0,window.audio.volume=.3;var s=m.createWave();window.golpe_audio=document.createElement("audio"),window.golpe_audio.src=URL.createObjectURL(new Blob([s],{type:"audio/wav"})),window.golpe_audio.volume=.5;var a=v.createWave();window.levelup_audio2=document.createElement("audio"),window.levelup_audio2.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"})),window.levelup_audio2.volume=.2;var e=x.createWave();window.disparo_audio2=document.createElement("audio"),window.disparo_audio=document.createElement("audio"),window.disparo_audio.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),window.disparo_audio.volume=.6,window.disparo_audio2.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),window.disparo_audio2.volume=.5}},50)}();